ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     1

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                     2 ***********************************************************************
                                                     3 *
                                                     4 *                 Simple 3211 Printer Tests
                                                     5 *
                                                     6 ***********************************************************************
                                                     7 *
                                                     8 *   This program verifies proper Hercules 3211 printer device handler
                                                     9 *   functionality.  It performs a series of I/O operations to a 3211
                                                    10 *   printer device and verifies the outcome (results) is as expected.
                                                    11 *   It is designed to run as a standalone test started via a restart
                                                    12 *   interrupt PSW at absolute address 0.
                                                    13 *
                                                    14 *        --------------------------------------------------
                                                    15 *          ALL TESTS SHOULD BE INDEPENDENT OF ONE ANOTHER!
                                                    16 *          NO TEST SHOULD DEPEND ON THE RESULT OF ANOTHER!
                                                    17 *        --------------------------------------------------
                                                    18 *
                                                    19 *   Each test is basically designed to test one thing, although most
                                                    20 *   tests perform several different variations of a given thing.
                                                    21 *
                                                    22 *   All tests are executed by default, but you can choose at runtime
                                                    23 *   which tests should be run and which should be skipped by setting
                                                    24 *   the corresponding "DOFLAGS" to either zero or non-zero. Setting
                                                    25 *   the DOFLAG to binary zero skips that test. A non-zero value will
                                                    26 *   cause the test to be executed. The "DOFLAGS" field should always
                                                    27 *   be at absolute address X'FF0' (16 bytes before the 2nd 4K page).
                                                    28 *
                                                    29 *        --------------------------------------------------
                                                    30 *          ALL TESTS SHOULD BE INDEPENDENT OF ONE ANOTHER!
                                                    31 *          NO TEST SHOULD DEPEND ON THE RESULT OF ANOTHER!
                                                    32 *        --------------------------------------------------
                                                    33 *
                                                    34 *   Once all tests are finished the resulting "RCFLAGS" are examined.
                                                    35 *   If they are all zero then a normal completion all zeros disabled
                                                    36 *   wait PSW is loaded. If all "RCFLAGS" are not zero then a failure
                                                    37 *   disabled wait PSW (whose instruction address is "BAD") is loaded
                                                    38 *   instead. The "RCFLAGS" field should always be at absolute address
                                                    39 *   X'1000' (i.e. the first 16 bytes of the 2nd 4K page).
                                                    40 *
                                                    41 ***********************************************************************
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     2

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                    43 ***********************************************************************
                                                    44 *
                                                    45 *   Example Hercules Testcase:
                                                    46 *
                                                    47 *
                                                    48 *         *Testcase 3211 printer
                                                    49 *         mainsize  1
                                                    50 *         numcpu    1
                                                    51 *         sysclear
                                                    52 *         archlvl   390
                                                    53 *         loadcore  "$(testpath)/3211.core"
                                                    54 *         #
                                                    55 *         # NOTE: In addition to the above 3211.core file this test
                                                    56 *         #       also uses an associated "3211.rexx" script too.
                                                    57 *         #
                                                    58 *         detach    00f
                                                    59 *         attach    00f 3211 "3211.txt"
                                                    60 *         diag8cmd  enable noecho   # need diag8 to exec rexx script
                                                    61 *         shcmdopt  enable diag8    # rexx script needs shell access
                                                    62 *         runtest   0.1             # (plenty of time)
                                                    63 *         detach    000f            # (no longer needed)
                                                    64 *         diag8cmd  disable noecho  # (no longer needed)
                                                    65 *         shcmdopt  disable nodiag8 # (no longer needed)
                                                    66 *         *Compare
                                                    67 *         r 1000.10
                                                    68 *         *Want "Return Code flags" 00000000 00000000 00000000 00000000
                                                    69 *         *Done
                                                    70 *
                                                    71 *
                                                    72 *   Refer to comments at label "BEGIN" for register usage.
                                                    73 *
                                                    74 ***********************************************************************









                                                    76          PRINT OFF
                                                  3638          PRINT ON

                                                  3640 ***********************************************************************
                                                  3641 *        SATK prolog stuff...
                                                  3642 ***********************************************************************

                                                  3644          ARCHLVL  ZARCH=NO,MNOTE=NO
                                                  3646+$AL      OPSYN AL
                                                  3647+$ALR     OPSYN ALR
                                                  3648+$B       OPSYN B
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     3

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3649+$BAS     OPSYN BAS
                                                  3650+$BASR    OPSYN BASR
                                                  3651+$BC      OPSYN BC
                                                  3652+$BCTR    OPSYN BCTR
                                                  3653+$BE      OPSYN BE
                                                  3654+$BH      OPSYN BH
                                                  3655+$BL      OPSYN BL
                                                  3656+$BM      OPSYN BM
                                                  3657+$BNE     OPSYN BNE
                                                  3658+$BNH     OPSYN BNH
                                                  3659+$BNL     OPSYN BNL
                                                  3660+$BNM     OPSYN BNM
                                                  3661+$BNO     OPSYN BNO
                                                  3662+$BNP     OPSYN BNP
                                                  3663+$BNZ     OPSYN BNZ
                                                  3664+$BO      OPSYN BO
                                                  3665+$BP      OPSYN BP
                                                  3666+$BXLE    OPSYN BXLE
                                                  3667+$BZ      OPSYN BZ
                                                  3668+$CH      OPSYN CH
                                                  3669+$L       OPSYN L
                                                  3670+$LH      OPSYN LH
                                                  3671+$LM      OPSYN LM
                                                  3672+$LPSW    OPSYN LPSW
                                                  3673+$LR      OPSYN LR
                                                  3674+$LTR     OPSYN LTR
                                                  3675+$NR      OPSYN NR
                                                  3676+$SL      OPSYN SL
                                                  3677+$SLR     OPSYN SLR
                                                  3678+$SR      OPSYN SR
                                                  3679+$ST      OPSYN ST
                                                  3680+$STM     OPSYN STM
                                                  3681+$X       OPSYN X
                                                  3682+$AHI     OPSYN AHI
                                                  3683+$B       OPSYN J
                                                  3684+$BC      OPSYN BRC
                                                  3685+$BE      OPSYN JE
                                                  3686+$BH      OPSYN JH
                                                  3687+$BL      OPSYN JL
                                                  3688+$BM      OPSYN JM
                                                  3689+$BNE     OPSYN JNE
                                                  3690+$BNH     OPSYN JNH
                                                  3691+$BNL     OPSYN JNL
                                                  3692+$BNM     OPSYN JNM
                                                  3693+$BNO     OPSYN JNO
                                                  3694+$BNP     OPSYN JNP
                                                  3695+$BNZ     OPSYN JNZ
                                                  3696+$BO      OPSYN JO
                                                  3697+$BP      OPSYN JP
                                                  3698+$BXLE    OPSYN JXLE
                                                  3699+$BZ      OPSYN JZ
                                                  3700+$CHI     OPSYN CHI
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     4

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3702 ***********************************************************************
                                                  3703 *        Initiate the TEST3211 CSECT in the CODE region
                                                  3704 *        with the location counter at 0
                                                  3705 ***********************************************************************

                                                  3707 TEST3211 ASALOAD  REGION=CODE
                              00000000  0000100F  3708+TEST3211 START 0,CODE
00000000  000A0000 00000008                       3710+         PSW   0,0,2,0,X'008'      64-bit Restart ISR Trap New PSW
00000008                      00000008  00000058  3711+         ORG   TEST3211+X'058'
00000058  000A0000 00000018                       3713+         PSW   0,0,2,0,X'018'      64-bit External ISR Trap New PSW
00000060  000A0000 00000020                       3714+         PSW   0,0,2,0,X'020'      64-bit Supervisor Call ISR Trap New PSW
00000068  000A0000 00000028                       3715+         PSW   0,0,2,0,X'028'      64-bit Program ISR Trap New PSW
00000070  000A0000 00000030                       3716+         PSW   0,0,2,0,X'030'      64-bit Machine Check Trap New PSW
00000078  000A0000 00000038                       3717+         PSW   0,0,2,0,X'038'      64-bit Input/Output Trap New PSW
00000080                      00000080  00000200  3718+         ORG   TEST3211+512





                                                  3720 ***********************************************************************
                                                  3721 *        Create IPL (restart) PSW
                                                  3722 ***********************************************************************

                                                  3724          ASAIPL  IA=BEGIN
                              00000000  0000100F  3725+TEST3211 CSECT
00000200                      00000200  00000000  3726+         ORG   TEST3211
00000000  00080000 00000200                       3727+         PSW   0,0,0,0,BEGIN,24
00000008                      00000008  00000200  3728+         ORG   TEST3211+512     Reset CSECT to end of assigned storage area
                              00000000  0000100F  3729+TEST3211 CSECT
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     5

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3731 ***********************************************************************
                                                  3732 *               The actual TEST3211 program itself...
                                                  3733 ***********************************************************************
                                                  3734 *
                                                  3735 *  Architecture Mode: ESA/390
                                                  3736 *  Addressing Mode:   24-bit
                                                  3737 *  Register Usage:
                                                  3738 *
                                                  3739 *   R0       (work)
                                                  3740 *   R1       I/O device used by ENADEV and RAWIO macros
                                                  3741 *   R2       Program base register
                                                  3742 *   R3       IOCB pointer for ENADEV and RAWIO macros
                                                  3743 *   R4       IO work register used by ENADEV and RAWIO
                                                  3744 *   R5       Used for CPU register when signaling architecture change
                                                  3745 *   R6,R7    Signaling registers when changing architecture
                                                  3746 *   R8       ORB pointer
                                                  3747 *   R9       SCSW pointer
                                                  3748 *   R10-R15  (work)
                                                  3749 *
                                                  3750 ***********************************************************************


00000200                      00000000            3752          USING  ASA,R0          Low core addressability
00000200                      00000200            3753          USING  BEGIN,R2        Program Addressability
00000200                      00000000            3754          USING  IOCB,R3         SATK Device I/O Control Block
00000200                      00000000            3755          USING  ORB,R8          ESA/390 Operation Request Block
00000200                      00000000            3756          USING  SCSW,R9         ESA/390 Subchannel Status Word


00000200  0520                                    3758 BEGIN    BALR  R2,0             Initalize Base Register
00000202  0620                                    3759          BCTR  R2,0             Initalize Base Register
00000204  0620                                    3760          BCTR  R2,0             Initalize Base Register

00000206  45E0 203C                     0000023C  3762          BAL   R14,INIT         Initalize Program


0000020A  45E0 20E6                     000002E6  3764          BAL   R14,TEST01       z/VM 6.3 printer 3211 initial sequence
0000020E  45E0 211E                     0000031E  3765          BAL   R14,TEST02       Skip to nonexistent FCB channel
00000212  45E0 2160                     00000360  3766          BAL   R14,TEST03       Skip to chan we're at = No Skip
00000216  45E0 21A4                     000003A4  3767          BAL   R14,TEST04       Skip to chan we're at = Should Skip
0000021A  45E0 21E8                     000003E8  3768          BAL   R14,TEST05       Channel  9 crossed
0000021E  45E0 2234                     00000434  3769          BAL   R14,TEST06       Channel 12 crossed
00000222  45E0 226C                     0000046C  3770          BAL   R14,TEST07       FCB/UCS Load Check
00000226  45E0 2328                     00000528  3771          BAL   R14,TEST08       Diagnostic Read FCB
0000022A  45E0 237C                     0000057C  3772          BAL   R14,TEST09       Diagnostic Write/Read PLB


0000022E  D60F 2E00 2E00      00001000  00001000  3774          OC    RCFLAGS,RCFLAGS  Did all tests succeed? (all zeros?)
00000234  4770 205C                     0000025C  3775          BNZ   FAIL             No, Abnormal termination
00000238  47F0 2078                     00000278  3776          B     EOJ              Yes, Normal completion
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     6

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3778 ***********************************************************************
                                                  3779 *        Program Initialization
                                                  3780 ***********************************************************************

0000023C                                          3782 INIT     DS     0H              Program Initialization

                                                  3784          SETARCH  2             Cleanly enter 64-bit mode if sensible

0000023C  4130 24B4                     000006B4  3786          LA     R3,IOCB_00F     Point to IOCB
00000240  5880 3018                     00000018  3787          L      R8,IOCBORB      Point to ORB
00000244  58F0 3020                     00000020  3788          L      R15,IOCBIRB     Point to IRB
00000248                      00000000            3789          USING  IRB,R15         Temporary addressability
00000248  4190 F000                     00000000  3790          LA     R9,IRBSCSW      Point to SCSW
0000024C                                          3791          DROP   R15             Done with IRB

0000024C  45F0 2088                     00000288  3793          BAL    R15,IOINIT      Initialize the CPU for I/O operations
00000250  45F0 2096                     00000296  3794          BAL    R15,ENADEV      Enable our device making ready for use

00000254  D20F 2E00 2DF0      00001000  00000FF0  3796          MVC    RCFLAGS,DOFLAGS Initialize test return code flags
0000025A  07FE                                    3797          BR     R14             Return to caller




                                                  3799 ***********************************************************************
                                                  3800 *        Normal completion or Abnormal termination PSWs
                                                  3801 ***********************************************************************

                                                  3803 FAIL     DWAIT LOAD=YES,CODE=BAD    Abnormal termination
0000025C                                          3804+FAIL     DS    0H
0000025C  8200 2060                     00000260  3805+         LPSW  DWAT0008
00000260  000A0000 00010BAD                       3806+DWAT0008 PSW   0,0,2,0,X'010BAD'


                                                  3808 FAILD8   DWAIT LOAD=YES,CODE=D8     Diagnose X'008' failed
00000268                                          3809+FAILD8   DS    0H
00000268  8200 2070                     00000270  3810+         LPSW  DWAT0009
00000270  000A0000 000100D8                       3811+DWAT0009 PSW   0,0,2,0,X'0100D8'


                                                  3813 EOJ      DWAITEND LOAD=YES          Normal completion
00000278                                          3815+EOJ      DS    0H
00000278  8200 2080                     00000280  3816+         LPSW  DWAT0011
00000280  000A0000 00000000                       3817+DWAT0011 PSW   0,0,2,0,X'000000'
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     7

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3819 ***********************************************************************
                                                  3820 *        Initialize the CPU for I/O operations
                                                  3821 ***********************************************************************

                                                  3823 IOINIT   IOINIT ,
00000288  B766 2090                     00000290  3824+IOINIT   LCTL  6,6,IOMK0012       Enable subchannel subclasses for interruptions
0000028C  47F0 2094                     00000294  3825+         B     IOMK0012+4
00000290                                          3826+IOMK0012 DS    0F
00000290  FF000000                                3827+         DC    XL4'FF000000'         All subchannel subclasses enabled
00000294  07FF                                    3828          BR    R15              Return to caller



                                                  3830 ***********************************************************************
                                                  3831 *        Enable the device, making it ready for use
                                                  3832 ***********************************************************************

                                                  3834 ENADEV   ENADEV  ENAOKAY,FAIL,REG=4
00000296  5810 20DC                     000002DC  3835+ENADEV   L     1,FIND0013
0000029A  5840 3028                     00000028  3836+         $L    4,IOCBSIB          Locate where the SCHIB is to be stored
0000029E                      00000000            3837+         USING SCHIB,4
0000029E                                          3838+FINL0013 DS    0H   Retrieve Subchannel Information Block for desired device number
0000029E  B234 4000                     00000000  3839+         STSCH 0(4)               Store the SCHIB for first subchannel
000002A2  A774 FFDD                     0000025C  3840+         $BC   B'0111',FAIL       Subchannel does not exist and device number not found
000002A6  9101 4005                     00000005  3841+         TM    PMCW1_8,PMCWV      Is the subchannel device number valid?
000002AA  A784 0011                     000002CC  3842+         $BZ   FINN0013           ..No, check the next subchannel
000002AE  D501 4006 3004      00000006  00000004  3843+         CLC   PMCWDNUM,IOCBDEV   Is this the device number being sought?
000002B4  A774 000C                     000002CC  3844+         $BNE  FINN0013           ..No, check the next subchannel
                                                  3845+* Subchannel found!
000002B8  5010 3000                     00000000  3846+         ST    1,IOCBDID          Remember the subchannel so I/O can be done to it.
000002BC  9680 4005                     00000005  3847+         OI    PMCW1_8,PMCWE      Make sure it is enabled so I/O requests accepted
000002C0  B232 4000                     00000000  3848+         MSCH  0(4)               Enable the subchannel to the channel sub-system
000002C4  A784 0010                     000002E4  3849+         $BC   B'1000',ENAOKAY    CC0 (SCHIB updated), device is ready.
000002C8  A7F4 FFCA                     0000025C  3850+         $B    FAIL               CC1,CC2,CC3 (SCHIB update failed), quit
000002CC                                          3851+FINN0013 DS    0H  Advance to next subchannel
000002CC  4110 1001                     00000001  3852+         LA    1,1(0,1)           Advance to next subchannel
000002D0  5510 20E0                     000002E0  3853+         CL    1,FINM0013         Beyond maximum subchannel
000002D4  A7D4 FFE5                     0000029E  3854+         $BNH  FINL0013           ..No, examine the next subchannel
000002D8  A724 FFC2                     0000025C  3855+         $BH   FAIL               ..Yes, failed to enable the device
000002DC                                          3856+         DROP  4                  Forget SCHIB addressing
000002DC  00010000                                3857+FIND0013 DC    A(X'00010000')     First subchannel subsystem ID
000002E0  0001FFFF                                3858+FINM0013 DC    A(X'0001FFFF')     Last subchannel subsystem ID
                                                  3859 *
000002E4  07FF                                    3860 ENAOKAY  BR    R15            Return to caller if device enabled OK
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     8

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3862 ***********************************************************************
                                                  3863 *        TEST01:  z/VM 6.3 printer 3211 initial sequence
                                                  3864 ***********************************************************************
                                                  3865 *
                                                  3866 *   A    z/VM 6.3 sequence: 07, 06, 04.
                                                  3867 *        06 == encoded current line number.
                                                  3868 *
                                                  3869 *   B    z/VM 6.3 sequence: 0B, 07, 06, 04.
                                                  3870 *        06 == encoded current line number.
                                                  3871 *
                                                  3872 ***********************************************************************

000002E6  9500 2E01                     00001001  3874 TEST01   CLI   FLAG01,0         Should we do this test?
000002EA  078E                                    3875          BER   R14              No, skip this test

000002EC  4100 2830                     00000A30  3877          LA    R0,CHPGM01A      Diagnostic Gate, Check Read
000002F0  45F0 2420                     00000620  3878          BAL   R15,EXCP         Do the I/O
000002F4  9102 9008                     00000008  3879          TM    SCSWUS,SCSWUC    Unit Check?
000002F8  4710 23D8                     000005D8  3880          BO    UCFAIL           Yes, FAIL

000002FC  9540 256B                     0000076B  3882          CLI   CKRD01A,X'40'    Expected value? (line #1)
00000300  077E                                    3883          BNER  R14              No, FAIL

00000302  4100 2848                     00000A48  3885          LA    R0,CHPGM01B      Space 1, Diagnostic Gate, Check Read
00000306  45F0 2420                     00000620  3886          BAL   R15,EXCP         Do the I/O
0000030A  9102 9008                     00000008  3887          TM    SCSWUS,SCSWUC    Unit Check?
0000030E  4710 23D8                     000005D8  3888          BO    UCFAIL           Yes, FAIL

00000312  95C0 256C                     0000076C  3890          CLI   CKRD01B,X'C0'    Expected value? (line #2)
00000316  077E                                    3891          BNER  R14              No, FAIL

00000318  9200 2E01                     00001001  3893          MVI   FLAG01,0         Test successful
0000031C  07FE                                    3894          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page     9

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3896 ***********************************************************************
                                                  3897 *        TEST02:  Skip to nonexistent FCB channel
                                                  3898 ***********************************************************************
                                                  3899 *
                                                  3900 *   A    Load FCB without channel 2.
                                                  3901 *
                                                  3902 *   B    Skip to channel 2.
                                                  3903 *        Should be error.
                                                  3904 *
                                                  3905 ***********************************************************************

0000031E  9500 2E02                     00001002  3907 TEST02   CLI   FLAG02,0         Should we do this test?
00000322  078E                                    3908          BER   R14              No, skip this test

00000324  4100 2868                     00000A68  3910          LA    R0,CHPGM02A      Load the test FCB
00000328  45F0 2420                     00000620  3911          BAL   R15,EXCP         Do the I/O
0000032C  9102 9008                     00000008  3912          TM    SCSWUS,SCSWUC    Unit Check?
00000330  4710 23D8                     000005D8  3913          BO    UCFAIL           Yes, FAIL

00000334  4100 2870                     00000A70  3915          LA    R0,CHPGM02B      Skip to non-existent channel
00000338  45F0 2420                     00000620  3916          BAL   R15,EXCP         Do the I/O
0000033C  9102 9008                     00000008  3917          TM    SCSWUS,SCSWUC    Unit Check?
00000340  07EE                                    3918          BNOR  R14              No, FAIL

00000342  45F0 241C                     0000061C  3920          BAL   R15,EXCPSENS     Get the sense information
00000346  9102 9008                     00000008  3921          TM    SCSWUS,SCSWUC    Unit Check?
0000034A  4710 23D8                     000005D8  3922          BO    UCFAIL           Yes, FAIL

0000034E  9118 2538                     00000738  3924          TM    SENSE+0,SNS0EQCK+SNS0DTCK
00000352  07EE                                    3925          BNOR  R14              Both not set, FAIL
00000354  9110 2539                     00000739  3926          TM    SENSE+1,SNS1LPCK
00000358  07EE                                    3927          BNOR  R14              Not also set, FAIL

0000035A  9200 2E02                     00001002  3929          MVI   FLAG02,0         Test successful
0000035E  07FE                                    3930          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    10

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3932 ***********************************************************************
                                                  3933 *        TEST03:  Skip to chan we're at = No Skip
                                                  3934 ***********************************************************************
                                                  3935 *
                                                  3936 *   A    Skip to channel 12
                                                  3937 *        Space n immed to reach channel 1
                                                  3938 *
                                                  3939 *   B    Skip to channel 1: should NOT skip!
                                                  3940 *            (because we're already positioned at the
                                                  3941 *            desired channel and nothing was printed)
                                                  3942 *
                                                  3943 ***********************************************************************

00000360  9500 2E03                     00001003  3945 TEST03   CLI   FLAG03,0         Should we do this test?
00000364  078E                                    3946          BER   R14              No, skip this test

00000366  4100 2878                     00000A78  3948          LA    R0,CHPGM03A      Skip to chan 12, Space to chan 1
0000036A  45F0 2420                     00000620  3949          BAL   R15,EXCP         Do the I/O
0000036E  9102 9008                     00000008  3950          TM    SCSWUS,SCSWUC    Unit Check?
00000372  4710 23D8                     000005D8  3951          BO    UCFAIL           Yes, FAIL

00000376  4100 2570                     00000770  3953          LA    R0,DIAG803A      DIAG8 parameters
0000037A  45F0 23E4                     000005E4  3954          BAL   R15,HCMD         Printer file size BEFORE skip attempt

0000037E  4100 2898                     00000A98  3956          LA    R0,CHPGM03B      Skip to channel 1
00000382  45F0 2420                     00000620  3957          BAL   R15,EXCP         Do the I/O
00000386  9102 9008                     00000008  3958          TM    SCSWUS,SCSWUC    Unit Check?
0000038A  4710 23D8                     000005D8  3959          BO    UCFAIL           Yes, FAIL

0000038E  4100 2584                     00000784  3961          LA    R0,DIAG803B      DIAG8 parameters
00000392  45F0 23E4                     000005E4  3962          BAL   R15,HCMD         Printer file size AFTER skip attempt

00000396  D503 2594 2580      00000794  00000780  3964          CLC   SIZ03B,SIZ03A    Same size?
0000039C  077E                                    3965          BNER  R14              No, FAIL

0000039E  9200 2E03                     00001003  3967          MVI   FLAG03,0         Test successful
000003A2  07FE                                    3968          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    11

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  3970 ***********************************************************************
                                                  3971 *        TEST04:  Skip to chan we're at = Should Skip
                                                  3972 ***********************************************************************
                                                  3973 *
                                                  3974 *   A    Print and space 0 (i.e. no spacing)
                                                  3975 *
                                                  3976 *   B    Skip to channel 1: SHOULD skip this time!
                                                  3977 *            (even though we ARE already positioned at
                                                  3978 *            channel 1), because something WAS printed!
                                                  3979 *
                                                  3980 ***********************************************************************

000003A4  9500 2E04                     00001004  3982 TEST04   CLI   FLAG04,0         Should we do this test?
000003A8  078E                                    3983          BER   R14              No, skip this test

000003AA  4100 28A0                     00000AA0  3985          LA    R0,CHPGM04A      Write no spacing (while at chan 1)
000003AE  45F0 2420                     00000620  3986          BAL   R15,EXCP         Do the I/O
000003B2  9102 9008                     00000008  3987          TM    SCSWUS,SCSWUC    Unit Check?
000003B6  4710 23D8                     000005D8  3988          BO    UCFAIL           Yes, FAIL

000003BA  4100 2598                     00000798  3990          LA    R0,DIAG804A      DIAG8 parameters
000003BE  45F0 23E4                     000005E4  3991          BAL   R15,HCMD         Printer file size BEFORE skip attempt

000003C2  4100 28C8                     00000AC8  3993          LA    R0,CHPGM04B      Skip to channel 1
000003C6  45F0 2420                     00000620  3994          BAL   R15,EXCP         Do the I/O
000003CA  9102 9008                     00000008  3995          TM    SCSWUS,SCSWUC    Unit Check?
000003CE  4710 23D8                     000005D8  3996          BO    UCFAIL           Yes, FAIL

000003D2  4100 25B4                     000007B4  3998          LA    R0,DIAG804B      DIAG8 parameters
000003D6  45F0 23E4                     000005E4  3999          BAL   R15,HCMD         Printer file size AFTER skip attempt

000003DA  D503 25C4 25A8      000007C4  000007A8  4001          CLC   SIZ04B,SIZ04A    Same size?
000003E0  078E                                    4002          BER   R14              Yes, FAIL

000003E2  9200 2E04                     00001004  4004          MVI   FLAG04,0         Test successful
000003E6  07FE                                    4005          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    12

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4007 ***********************************************************************
                                                  4008 *        TEST05:  Channel 9 crossed
                                                  4009 ***********************************************************************
                                                  4010 *
                                                  4011 *   A    Skip to channel 8 (two lines before channel 9)
                                                  4012 *        Print and space 3
                                                  4013 *        Should cause Unit Check error, sense = ch9 CROSSED
                                                  4014 *
                                                  4015 *   B    Skip to channel 8 (two lines before channel 9)
                                                  4016 *        Space 2 immed
                                                  4017 *        Should cause Unit Check error, sense = ch9 REACHED
                                                  4018 *
                                                  4019 *   Note: this test depends on the FCB loaded by Test02
                                                  4020 *
                                                  4021 ***********************************************************************

000003E8  9500 2E05                     00001005  4023 TEST05   CLI   FLAG05,0         Should we do this test?
000003EC  078E                                    4024          BER   R14              No, skip this test

000003EE  4100 28D0                     00000AD0  4026          LA    R0,CHPGM05A      Skip to chan 8, space PAST chan 9
000003F2  45F0 2420                     00000620  4027          BAL   R15,EXCP         Do the I/O
000003F6  9102 9008                     00000008  4028          TM    SCSWUS,SCSWUC    Unit Check?
000003FA  07EE                                    4029          BNOR  R14              No, FAIL

000003FC  45F0 241C                     0000061C  4031          BAL   R15,EXCPSENS     Get the sense information
00000400  9102 9008                     00000008  4032          TM    SCSWUS,SCSWUC    Unit Check?
00000404  4710 23D8                     000005D8  4033          BO    UCFAIL           Yes, FAIL

00000408  9101 2538                     00000738  4035          TM    SENSE+0,SNS0CH9  Chan9 sense?
0000040C  07EE                                    4036          BNOR  R14              Not set, FAIL

0000040E  4100 28E8                     00000AE8  4038          LA    R0,CHPGM05B      Skip to chan 8, space TO chan 9
00000412  45F0 2420                     00000620  4039          BAL   R15,EXCP         Do the I/O
00000416  9102 9008                     00000008  4040          TM    SCSWUS,SCSWUC    Unit Check?
0000041A  07EE                                    4041          BNOR  R14              No, FAIL

0000041C  45F0 241C                     0000061C  4043          BAL   R15,EXCPSENS     Get the sense information
00000420  9102 9008                     00000008  4044          TM    SCSWUS,SCSWUC    Unit Check?
00000424  4710 23D8                     000005D8  4045          BO    UCFAIL           Yes, FAIL

00000428  9101 2538                     00000738  4047          TM    SENSE+0,SNS0CH9  Chan9 sense?
0000042C  07EE                                    4048          BNOR  R14              Not set, FAIL

0000042E  9200 2E05                     00001005  4050          MVI   FLAG05,0         Test successful
00000432  07FE                                    4051          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    13

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4053 ***********************************************************************
                                                  4054 *        TEST06:  Channel 12 crossed
                                                  4055 ***********************************************************************
                                                  4056 *
                                                  4057 *   A    Skip to channel 11 (two lines before channel 12)
                                                  4058 *        Space 3 immed
                                                  4059 *        Should cause Unit Exception in CSW (channel 12 CROSSED)
                                                  4060 *
                                                  4061 *   B    Skip to channel 11 (two lines before channel 12)
                                                  4062 *        Print and space 2
                                                  4063 *        Should cause Unit Exception in CSW (channel 12 REACHED)
                                                  4064 *
                                                  4065 *   Note: this test depends on the FCB loaded by Test02
                                                  4066 *
                                                  4067 ***********************************************************************

00000434  9500 2E06                     00001006  4069 TEST06   CLI   FLAG06,0         Should we do this test?
00000438  078E                                    4070          BER   R14              No, skip this test

0000043A  4100 28F8                     00000AF8  4072          LA    R0,CHPGM06A      Skip to chan 11, space PAST chan 12
0000043E  45F0 2420                     00000620  4073          BAL   R15,EXCP         Do the I/O
00000442  9102 9008                     00000008  4074          TM    SCSWUS,SCSWUC    Unit Check?
00000446  4710 23D8                     000005D8  4075          BO    UCFAIL           Yes, FAIL

0000044A  9101 9008                     00000008  4077          TM    SCSWUS,SCSWUX    Unit Exception set?
0000044E  07EE                                    4078          BNOR  R14              No, FAIL

00000450  4100 2910                     00000B10  4080          LA    R0,CHPGM06B      Skip to chan 11, space TO chan 12
00000454  45F0 2420                     00000620  4081          BAL   R15,EXCP         Do the I/O
00000458  9102 9008                     00000008  4082          TM    SCSWUS,SCSWUC    Unit Check?
0000045C  4710 23D8                     000005D8  4083          BO    UCFAIL           Yes, FAIL

00000460  9101 9008                     00000008  4085          TM    SCSWUS,SCSWUX    Unit Exception set?
00000464  07EE                                    4086          BNOR  R14              No, FAIL

00000466  9200 2E06                     00001006  4088          MVI   FLAG06,0         Test successful
0000046A  07FE                                    4089          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    14

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4091 ***********************************************************************
                                                  4092 *        TEST07:  Load Check
                                                  4093 ***********************************************************************
                                                  4094 *
                                                  4095 *   A    Try loading FCB with more than 30 channel stops
                                                  4096 *        Should cause Unit Check, SENSE = Load Check
                                                  4097 *
                                                  4098 *   D    Try loading FCB with channel code > 12.
                                                  4099 *        Should cause Unit Check, SENSE = Load Check
                                                  4100 *
                                                  4101 *   E    Try loading FCB with missing end-of-form flag
                                                  4102 *        Should cause Unit Check, SENSE = Load Check
                                                  4103 *
                                                  4104 *   F    Try loading UCS with less than required #of bytes
                                                  4105 *        Should cause Unit Check, SENSE = Load Check,
                                                  4106 *        REGARDLESS of SLI bit in CCW.
                                                  4107 *
                                                  4108 *   G    Try loading FCB with 31st channel stop @ end of form
                                                  4109 *        Should NOT cause Unit Check! (Should succeed!)
                                                  4110 *
                                                  4111 *   H    Try loading FCB w/LESS than required length (w/o SLI!)
                                                  4112 *        Should SUCCEED; 3211 never sets incorrect length for Load FCB
                                                  4113 *
                                                  4114 *   I    Try loading FCB w/MORE than required length (w/o SLI!)
                                                  4115 *        Should SUCCEED; 3211 never sets incorrect length for Load FCB
                                                  4116 *
                                                  4117 ***********************************************************************

0000046C  9500 2E07                     00001007  4119 TEST07   CLI   FLAG07,0         Should we do this test?
00000470  078E                                    4120          BER   R14              No, skip this test

00000472  4100 2920                     00000B20  4122          LA    R0,CHPGM07A      Load FCB more than 30 channel stops
00000476  45F0 2420                     00000620  4123          BAL   R15,EXCP         Do the I/O
0000047A  9102 9008                     00000008  4124          TM    SCSWUS,SCSWUC    Unit Check?
0000047E  07EE                                    4125          BNOR  R14              No, FAIL

00000480  45F0 241C                     0000061C  4127          BAL   R15,EXCPSENS     Get the sense information
00000484  9102 9008                     00000008  4128          TM    SCSWUS,SCSWUC    Unit Check?
00000488  4710 23D8                     000005D8  4129          BO    UCFAIL           Yes, FAIL

0000048C  9102 2538                     00000738  4131          TM    SENSE+0,SNS0LDCK Load Check?
00000490  07EE                                    4132          BNOR  R14              No, FAIL

00000492  4100 2928                     00000B28  4134          LA    R0,CHPGM07D      Load FCB with channel code > 12
00000496  45F0 2420                     00000620  4135          BAL   R15,EXCP         Do the I/O
0000049A  9102 9008                     00000008  4136          TM    SCSWUS,SCSWUC    Unit Check?
0000049E  07EE                                    4137          BNOR  R14              No, FAIL

000004A0  45F0 241C                     0000061C  4139          BAL   R15,EXCPSENS     Get the sense information
000004A4  9102 9008                     00000008  4140          TM    SCSWUS,SCSWUC    Unit Check?
000004A8  4710 23D8                     000005D8  4141          BO    UCFAIL           Yes, FAIL
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    15

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

000004AC  9102 2538                     00000738  4143          TM    SENSE+0,SNS0LDCK Load Check?
000004B0  07EE                                    4144          BNOR  R14              No, FAIL

000004B2  4100 2930                     00000B30  4146          LA    R0,CHPGM07E      Load FCB missing end-of-form flag
000004B6  45F0 2420                     00000620  4147          BAL   R15,EXCP         Do the I/O
000004BA  9102 9008                     00000008  4148          TM    SCSWUS,SCSWUC    Unit Check?
000004BE  07EE                                    4149          BNOR  R14              No, FAIL

000004C0  45F0 241C                     0000061C  4151          BAL   R15,EXCPSENS     Get the sense information
000004C4  9102 9008                     00000008  4152          TM    SCSWUS,SCSWUC    Unit Check?
000004C8  4710 23D8                     000005D8  4153          BO    UCFAIL           Yes, FAIL

000004CC  9102 2538                     00000738  4155          TM    SENSE+0,SNS0LDCK Load Check?
000004D0  07EE                                    4156          BNOR  R14              No, FAIL

000004D2  4100 2938                     00000B38  4158          LA    R0,CHPGM07F      Load UCS shorter than required
000004D6  45F0 2420                     00000620  4159          BAL   R15,EXCP         Do the I/O
000004DA  9102 9008                     00000008  4160          TM    SCSWUS,SCSWUC    Unit Check?
000004DE  07EE                                    4161          BNOR  R14              No, FAIL

000004E0  45F0 241C                     0000061C  4163          BAL   R15,EXCPSENS     Get the sense information
000004E4  9102 9008                     00000008  4164          TM    SCSWUS,SCSWUC    Unit Check?
000004E8  4710 23D8                     000005D8  4165          BO    UCFAIL           Yes, FAIL

000004EC  9102 2538                     00000738  4167          TM    SENSE+0,SNS0LDCK Load Check?
000004F0  07EE                                    4168          BNOR  R14              No, FAIL

000004F2  4100 2940                     00000B40  4170          LA    R0,CHPGM07G      Load FCB w/31st chan stop @ end of form
000004F6  45F0 2420                     00000620  4171          BAL   R15,EXCP         Do the I/O
000004FA  9102 9008                     00000008  4172          TM    SCSWUS,SCSWUC    Unit Check?
000004FE  4710 23D8                     000005D8  4173          BO    UCFAIL           Yes, FAIL

00000502  4100 2948                     00000B48  4175          LA    R0,CHPGM07H      Load FCB shorter than required
00000506  45F0 2420                     00000620  4176          BAL   R15,EXCP         Do the I/O
0000050A  9102 9008                     00000008  4177          TM    SCSWUS,SCSWUC    Unit Check?
0000050E  4710 23D8                     000005D8  4178          BO    UCFAIL           Yes, FAIL

00000512  4100 2950                     00000B50  4180          LA    R0,CHPGM07I      Load FCB longer than required
00000516  45F0 2420                     00000620  4181          BAL   R15,EXCP         Do the I/O
0000051A  9102 9008                     00000008  4182          TM    SCSWUS,SCSWUC    Unit Check?
0000051E  4710 23D8                     000005D8  4183          BO    UCFAIL           Yes, FAIL

00000522  9200 2E07                     00001007  4185          MVI   FLAG07,0         Test successful
00000526  07FE                                    4186          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    16

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4188 ***********************************************************************
                                                  4189 *        TEST08:  Diagnostic Read FCB
                                                  4190 ***********************************************************************
                                                  4191 *
                                                  4192 *   A    Load FCB (no indexing)
                                                  4193 *        Diagnostic Gate (set diagnostic mode)
                                                  4194 *        Diagnostic Read FCB
                                                  4195 *        Returned data should match the FCB we loaded.
                                                  4196 *
                                                  4197 *   B    Load FCB (positive indexing)
                                                  4198 *        Diagnostic Gate (set diagnostic mode)
                                                  4199 *        Diagnostic Read FCB
                                                  4200 *        Returned data should match the FCB we loaded.
                                                  4201 *
                                                  4202 *   C    Load FCB (negative indexing)
                                                  4203 *        Diagnostic Gate (set diagnostic mode)
                                                  4204 *        Diagnostic Read FCB
                                                  4205 *        Returned data should match the FCB we loaded.
                                                  4206 *
                                                  4207 ***********************************************************************

00000528  9500 2E08                     00001008  4209 TEST08   CLI   FLAG08,0         Should we do this test?
0000052C  078E                                    4210          BER   R14              No, skip this test

0000052E  4100 2958                     00000B58  4212          LA    R0,CHPGM08A      Load FCB (no idx), Diag, Read FCB
00000532  45F0 2420                     00000620  4213          BAL   R15,EXCP         Do the I/O
00000536  9102 9008                     00000008  4214          TM    SCSWUS,SCSWUC    Unit Check?
0000053A  4710 23D8                     000005D8  4215          BO    UCFAIL           Yes, FAIL

0000053E  D50B 27A5 2799      000009A5  00000999  4217          CLC   FCB08A2,FCB08A   Did we get back what we wrote?
00000544  077E                                    4218          BNER  R14              Different, FAIL

00000546  4100 2970                     00000B70  4220          LA    R0,CHPGM08B      Load FCB (+index), Diag, Read FCB
0000054A  45F0 2420                     00000620  4221          BAL   R15,EXCP         Do the I/O
0000054E  9102 9008                     00000008  4222          TM    SCSWUS,SCSWUC    Unit Check?
00000552  4710 23D8                     000005D8  4223          BO    UCFAIL           Yes, FAIL

00000556  D50C 27BE 27B1      000009BE  000009B1  4225          CLC   FCB08B2,FCB08B   Did we get back what we wrote?
0000055C  077E                                    4226          BNER  R14              Different, FAIL

0000055E  4100 2988                     00000B88  4228          LA    R0,CHPGM08C      Load FCB (-index), Diag, Read FCB
00000562  45F0 2420                     00000620  4229          BAL   R15,EXCP         Do the I/O
00000566  9102 9008                     00000008  4230          TM    SCSWUS,SCSWUC    Unit Check?
0000056A  4710 23D8                     000005D8  4231          BO    UCFAIL           Yes, FAIL

0000056E  D50C 27D8 27CB      000009D8  000009CB  4233          CLC   FCB08C2,FCB08C   Did we get back what we wrote?
00000574  077E                                    4234          BNER  R14              Different, FAIL

00000576  9200 2E08                     00001008  4236          MVI   FLAG08,0         Test successful
0000057A  07FE                                    4237          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    17

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4239 ***********************************************************************
                                                  4240 *        TEST09:  Diagnostic Write/Read PLB
                                                  4241 ***********************************************************************
                                                  4242 *
                                                  4243 *   A    Load any valid FCB
                                                  4244 *        Normal write and space
                                                  4245 *        Diagnostic Read PLB
                                                  4246 *        Returned data should match what we wrote.
                                                  4247 *
                                                  4248 *   B    Diagnostic Write
                                                  4249 *        No spacing should occur and NO DATA SHOULD BE WRITTEN.
                                                  4250 *        Diagnostic Read PLB
                                                  4251 *        Returned data should match what we wrote.
                                                  4252 *
                                                  4253 ***********************************************************************

0000057C  9500 2E09                     00001009  4255 TEST09   CLI   FLAG09,0         Should we do this test?
00000580  078E                                    4256          BER   R14              No, skip this test

00000582  4100 29A0                     00000BA0  4258          LA    R0,CHPGM09A      Write and Space, Diagnostic Read PLB
00000586  45F0 2420                     00000620  4259          BAL   R15,EXCP         Do the I/O
0000058A  9102 9008                     00000008  4260          TM    SCSWUS,SCSWUC    Unit Check?
0000058E  4710 23D8                     000005D8  4261          BO    UCFAIL           Yes, FAIL

00000592  D505 27EB 27E5      000009EB  000009E5  4263          CLC   PLB09A,PRT09A    Did we get back what we wrote?
00000598  077E                                    4264          BNER  R14              Different, FAIL

0000059A  4100 27F4                     000009F4  4266          LA    R0,DIAG809A      DIAG8 parameters
0000059E  45F0 23E4                     000005E4  4267          BAL   R15,HCMD         Printer file size BEFORE diag write

000005A2  4100 29C8                     00000BC8  4269          LA    R0,CHPGM09B      Diagnostic Write, Diagnostic Read PLB
000005A6  45F0 2420                     00000620  4270          BAL   R15,EXCP         Do the I/O
000005AA  9102 9008                     00000008  4271          TM    SCSWUS,SCSWUC    Unit Check?
000005AE  4710 23D8                     000005D8  4272          BO    UCFAIL           Yes, FAIL

000005B2  D505 280E 2808      00000A0E  00000A08  4274          CLC   PLB09B,PRT09B    Did we get back what we wrote?
000005B8  077E                                    4275          BNER  R14              Different, FAIL

000005BA  4100 2818                     00000A18  4277          LA    R0,DIAG809B      DIAG8 parameters
000005BE  45F0 23E4                     000005E4  4278          BAL   R15,HCMD         Printer file size AFTER diag write

000005C2  D503 2828 2804      00000A28  00000A04  4280          CLC   SIZ09B,SIZ09A    Same size?
000005C8  077E                                    4281          BNER  R14              No, FAIL

000005CA  D500 2814 27F1      00000A14  000009F1  4283          CLC   CKRD09B,CKRD09A  Same line position?
000005D0  077E                                    4284          BNER  R14              No, FAIL

000005D2  9200 2E09                     00001009  4286          MVI   FLAG09,0         Test successful
000005D6  07FE                                    4287          BR    R14              Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    18

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4289 ***********************************************************************
                                                  4290 *        Fail test due to unexpected Unit Check condition
                                                  4291 ***********************************************************************
                                                  4292 *
                                                  4293 *        Tests which encounter an unexpected Unit Check will
                                                  4294 *        branch to here to clear the error and fail their test.
                                                  4295 *
                                                  4296 ***********************************************************************

000005D8  45F0 241C                     0000061C  4298 UCFAIL   BAL   R15,EXCPSENS       Do SENSE to clear Unit Check
000005DC  9102 9008                     00000008  4299          TM    SCSWUS,SCSWUC      Did the SENSE I/O fail?
000005E0  07EE                                    4300          BNOR  R14                No, return to fail test
000005E2  0000                                    4301          DC    H'0'               *** SENSE FAILED?! ***







                                                  4303 ***********************************************************************
                                                  4304 *        Issue HERCULES DIAG X'008' command pointed to by R0
                                                  4305 ***********************************************************************

000005E4  906A 2408                     00000608  4307 HCMD     STM   R6,R10,HCMDSAVE      Save registers

000005E8  18A0                                    4309          LR    R10,R0               R10 -> HCMD parameters
000005EA  9869 A000                     00000000  4310          LM    R6,R9,0(R10)         Load Diag8 registers
000005EE  41A0 0040                     00000040  4311          LA    R10,X'40'            X'40 = Use response buffer option
000005F2  89A0 0018                     00000018  4312          SLL   R10,32-8             (shift into high-order byte)
000005F6  168A                                    4313          OR    R8,R10               Or option into cmd length reg

000005F8  83680008                                4315          DC    X'83',X'68',X'0008'  Issue Hercules Diagnose X'008'
000005FC  4770 2068                     00000268  4316          BNZ   FAILD8               Abort if unsuccessful

00000600  986A 2408                     00000608  4318          LM    R6,R10,HCMDSAVE      Restore registers
00000604  07FF                                    4319          BR    R15                  Return to caller

00000608  00000000 00000000                       4321 HCMDSAVE DC    5F'0'                Registers save area
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    19

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4323 ***********************************************************************
                                                  4324 *        Execute the channel program pointed to by R0
                                                  4325 ***********************************************************************

0000061C  4100 2530                     00000730  4327 EXCPSENS LA    R0,SENSEPGM    R0 -> Retrieve SENSE Channel Program

00000620  5000 8008                     00000008  4329 EXCP     ST    R0,ORBCCW      Plug Channel Program address into IORB

                                                  4331          RAWIO 4,FAIL=FAIL
00000624  9200 300E                     0000000E  4332+         MVI   IOCBSC,X'00'          Clear SC information
00000628  D201 300A 3006      0000000A  00000006  4333+         MVC   IOCBST,IOCBZERO       Clear accumulated status
0000062E  5810 3000                     00000000  4334+         L     1,IOCBDID             Remember the device ID with which I am working
                                                  4335+* Initiate Subchannel-based input/output operation
00000632  5840 3018                     00000018  4336+         $L    4,IOCBORB             Locate the ORB for the channel subsystem
00000636  B233 4000                     00000000  4337+         SSCH  0(4)                  Initiate the I/O operation
0000063A  A774 FE11                     0000025C  4338+         $BC   B'0111',FAIL          ..Start function failed, report/handle the error
0000063E  5840 3020                     00000020  4339+         $L    4,IOCBIRB             Locate the IRB storage area
00000642                      00000000            4340+         USING IRB,4                 Make it addressable

                                                  4342+* Wait for I/O operation to present status via an interruption
00000642                                          4343+IOWT0014 DS    0H  Wait for I/O to complete
00000642  D207 2468 0078      00000668  00000078  4345+         MVC   IOS0015(8),120(0)               Save Input/Output new PSW
00000648  D207 0078 2460      00000078  00000660  4346+         MVC   120(8,0),ION0015               Establish Input/Ouput new PSW
0000064E  8200 2458                     00000658  4347+         $LPSW WPSW0015                       Wait for event
00000658  020A0000 00000000                       4348+WPSW0015 PSW   2,0,2,0,0                      Wait for event
00000660  00082000 00000670                       4349+ION0015  PSW   0,0,0,32,IRST0015,24                I/O New PSW: cc==2
00000668  00000000 00000000                       4350+IOS0015  DC    XL8'00'
                                                  4351+* Handle input/output interruption
00000670                                          4352+IRST0015 DS    0H
00000670  D207 0078 2468      00000078  00000668  4353+         MVC   120(8,0),IOS0015             Restore input/output new PSW
                                                  4354+* Process the interruption...
                                                  4355+* Validate interruption is for the expected subchannel
00000676  5510 00B8                     000000B8  4356+         CL    1,IOSSID              Is this the device for which I am waiting?
0000067A  A774 FFE4                     00000642  4357+         $BNE  IOWT0014              ..No, continue waiting for it
                                                  4358+* Accumulate interruption information from IRB
0000067E  B235 4000                     00000000  4359+         TSCH  0(4)                  Retrive interrupt information
00000682  A744 FFE0                     00000642  4360+         $BC   B'0100',IOWT0014      CC1 (not status pending), wait for it to arrive
00000686  A714 FDEB                     0000025C  4361+         $BC   B'0001',FAIL          CC3 (not operational), an error then
                                                  4362+*                                    CC0 (status was pending), accumulate the status
0000068A  D600 300E 4003      0000000E  00000003  4363+         OC    IOCBSC,IRBSCSW+SCSW2  Accumulate status control
00000690  D601 300A 4008      0000000A  00000008  4364+         OC    IOCBST,IRBSCSW+SCSWUS Accumulate device and channel status
00000696  9104 300E                     0000000E  4365+         TM    IOCBSC,SCSWSPRI       Primary subchannel status?
0000069A  A7E4 FFD4                     00000642  4366+         $BNO  IOWT0014              ..No, wait for primary status
0000069E  D203 3010 4004      00000010  00000004  4367+         MVC   IOCBSCCW,IRBSCSW+SCSWCCW  CCW address
000006A4  D201 3016 400A      00000016  0000000A  4368+         MVC   IOCBRCNT,IRBSCSW+SCSWCNT  Residual count
                                                  4369+* Test for errors as specified in the IOCB
000006AA  910C 300A                     0000000A  4370+         TM    IOCBUS,SCSWCE+SCSWDE    Channel end and device end both accumulated?
000006AE  A7E4 FDD7                     0000025C  4371+         $BNO  FAIL                  Hunh? No CE and DE but do have primary status!
                                                  4372+* Input/Output operation successful

000006B2  07FF                                    4374          BR    R15            Return to caller
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    20

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4376 ***********************************************************************
                                                  4377 *         Structure used by RAWIO identifying
                                                  4378 *         the device and operation being performed
                                                  4379 ***********************************************************************

                                                  4381 IOCB_00F IOCB  X'00F',CCW=CHPGM01A
000006B4  00000000                                4382+IOCB_00F DC    A(0)            +0 Device Identifier (supplied by ENADEV macro)
000006B8  000F                                    4383+         DC    AL2(X'00F')     +4 Device address or device number
000006BA  0000                                    4384+         DC    H'0'            +6 Must be zeros
000006BC  D3                                      4385+         DC    AL1(X'D3')      +8 Default detected unit errors
000006BD  3F                                      4386+         DC    AL1(X'3F')      +9 Default detected channel errors
000006BE  0000                                    4387+         DC    HL2'0'          +10 Accumulated unit and channel errors
000006C0  0000                                    4388+         DC    HL2'0'          +12 Tested unit and channel status
000006C2  00                                      4389+         DC    XL1'00'         +14 Accumulated subchannel status control from SCSW
000006C3  80                                      4390+         DC    XL1'80'         +15 Default unsoliticed wait condition
000006C4  00000000                                4391+         DC    F'0'            +16 I/O status CCW address
000006C8  00000000                                4392+         DC    F'0'            +20 residual count
000006CC  00000724                                4393+         DC    A(IORB0016)     +24  Address where ORB is located
000006D0  00000000                                4394+         DC    A(0)            +28  reserved
000006D4  000006E4                                4395+         DC    A(IIRB0016)     +32 Address where IRB stored
000006D8  00000000                                4396+         DC    A(0)            +36 reserved
000006DC  000006E4                                4397+         DC    A(IIRB0016)     +40 Address where SCHIB stored
000006E0  00000000                                4398+         DC    A(0)            +44 reserved
000006E4  00000000 00000000                       4399+IIRB0016 DC    16F'0'              Embedded shared IRB and SCHIB area
00000724                                          4401+IORB0016 DS    0XL12
00000724  00000000                                4402+         DC    A(0)                         Word 0 - Interruption Parameter
00000728  00                                      4403+         DC    AL1((0)*16+B'0000')          Word 1, bits 0-7
00000729  80                                      4404+         DC    BL1'10000000'                Word 1, bits 8-15
0000072A  FF                                      4405+         DC    AL1(255)                     Word 1, bits 16-23
0000072B  00                                      4406+         DC    BL1'00000000'                 Word 1, bits 24-31
0000072C  00000A30                                4407+         DC    AL4(CHPGM01A)                Word 2 - CCW address
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    21

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4409 ***********************************************************************
                                                  4410 *        CCW opcode equates, etc.
                                                  4411 ***********************************************************************

                              00000040  00000001  4413 CC       EQU   X'40'    Command Chain
                              00000020  00000001  4414 SLI      EQU   X'20'    Suppress Incorrect Length Indication
                              00000010  00000001  4415 SKIP     EQU   X'10'    Skip Data Transfer

                              00000002  00000001  4417 READPLB  EQU   X'02'    Diagnostic Read PLB
                              00000003  00000001  4418 NOPCMD   EQU   X'03'    No Operation
                              00000004  00000001  4419 SENSECMD EQU   X'04'    Basic Sense
                              00000005  00000001  4420 WRITEPLB EQU   X'05'    Diagnostic Write PLB
                              00000006  00000001  4421 CHKREAD  EQU   X'06'    Diagnostic Check Read
                              00000007  00000001  4422 DIAGGATE EQU   X'07'    Diagnostic Gate
                              0000000A  00000001  4423 READUCS  EQU   X'0A'    Diagnostic Read UCB
                              00000012  00000001  4424 READFCB  EQU   X'12'    Diagnostic Read FCB
                              00000063  00000001  4425 LOADFCB  EQU   X'63'    Load Forms Control Buffer
                              000000FB  00000001  4426 LOADUCS  EQU   X'FB'    Load Universal Character Set Buffer

                              000000B4  00000001  4428 FCBL3211 EQU   180      FCB Length for 3211 printer
                              000001B0  00000001  4429 UCBL3211 EQU   432      UCB Length for 3211 printer

                              00000001  00000001  4431 SP0AFTER EQU   X'01'    Write Without Spacing
                              00000009  00000001  4432 SP1AFTER EQU   X'09'    Write And Space 1 Lines
                              00000011  00000001  4433 SP2AFTER EQU   X'11'    Write And Space 2 Lines
                              00000019  00000001  4434 SP3AFTER EQU   X'19'    Write And Space 3 Lines

                              0000000B  00000001  4436 SP1NOW   EQU   X'0B'    Space 1 Line  Immediate
                              00000013  00000001  4437 SP2NOW   EQU   X'13'    Space 2 Lines Immediate
                              0000001B  00000001  4438 SP3NOW   EQU   X'1B'    Space 3 Lines Immediate

                              0000008B  00000001  4440 SKP1NOW  EQU   X'8B'    Skip to Channel 1 Immediate
                              00000093  00000001  4441 SKP2NOW  EQU   X'93'    Skip to Channel 2 Immediate
                              000000C3  00000001  4442 SKP8NOW  EQU   X'C3'    Skip to Channel 8 Immediate
                              000000DB  00000001  4443 SKP11NOW EQU   X'DB'    Skip to Channel 11 Immediate
                              000000E3  00000001  4444 SKP12NOW EQU   X'E3'    Skip to Channel 12 Immediate

                              00000010  00000001  4446 SNS0EQCK EQU   X'10'    Sense byte 0, bit 3: Equipment Check
                              00000008  00000001  4447 SNS0DTCK EQU   X'08'    Sense byte 0, bit 4: Data Check
                              00000002  00000001  4448 SNS0LDCK EQU   X'02'    Sense byte 0, bit 6: Load Check
                              00000001  00000001  4449 SNS0CH9  EQU   X'01'    Sense byte 0, bit 7: Channel 9 Crossed
                              00000010  00000001  4450 SNS1LPCK EQU   X'10'    Sense byte 1, bit 3: Line Position Check
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    22

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4452 ***********************************************************************
                                                  4453 *        Working Storage
                                                  4454 ***********************************************************************

00000730  04200002 00000738                       4456 SENSEPGM CCW1  SENSECMD,SENSE,SLI,L'SENSE
00000738  0000                                    4457 SENSE    DC    XL2'0000'
0000073A  00010008 0009000B                       4458 TESTFCB  DC    X'000100080009000B000C0010'
00000746  85A78583 407F5B4D                       4459 HCMDPFSZ DC    C'exec "$(testpath)/3211.rexx" 3211.txt'

0000076B  00                                      4461 CKRD01A  DC    X'00'
0000076C  00                                      4462 CKRD01B  DC    X'00'

00000770  00000746 00000780                       4464 DIAG803A DC    A(HCMDPFSZ),A(SIZ03A)
00000778  00000025 00000004                       4465          DC    A(L'HCMDPFSZ),A(L'SIZ03A)
00000780  81814040                                4466 SIZ03A   DC    CL4'aa'
00000784  00000746 00000794                       4467 DIAG803B DC    A(HCMDPFSZ),A(SIZ03B)
0000078C  00000025 00000004                       4468          DC    A(L'HCMDPFSZ),A(L'SIZ03B)
00000794  82824040                                4469 SIZ03B   DC    CL4'bb'

00000798  00000746 000007A8                       4471 DIAG804A DC    A(HCMDPFSZ),A(SIZ04A)
000007A0  00000025 00000004                       4472          DC    A(L'HCMDPFSZ),A(L'SIZ04A)
000007A8  A7A74040                                4473 SIZ04A   DC    CL4'xx'
000007AC  D7D9E3F0 F4C1                           4474 PRT04A   DC    C'PRT04A'
000007B4  00000746 000007C4                       4475 DIAG804B DC    A(HCMDPFSZ),A(SIZ04B)
000007BC  00000025 00000004                       4476          DC    A(L'HCMDPFSZ),A(L'SIZ04B)
000007C4  A7A74040                                4477 SIZ04B   DC    CL4'xx'

000007C8  D7D9E3F0 F5C1                           4479 PRT05A   DC    C'PRT05A'

000007CE  D7D9E3F0 F6C2                           4481 PRT06B   DC    C'PRT06B'

000007D4                                          4483 FCB07A   DS   0XL32
000007D4  01020304 05060708                       4484          DC    X'0102030405060708090A'
000007DE  01020304 05060708                       4485          DC    X'0102030405060708090A'
000007E8  01020304 05060708                       4486          DC    X'0102030405060708090A'
000007F2  0110                                    4487          DC    X'0110'
000007F4  00000000 00000000                       4488 FCB07D   DC    X'00000000000000000000001D'
00000800  00000000 00000000                       4489 FCB07E   DC    X'000000000000000000000000'
0000080C  E4C3E2F0 F7C6                           4490 UCS07F   DC    C'UCS07F'
00000812                                          4491 FCB07G   DS   0XL31
00000812  01020304 05060708                       4492          DC    X'0102030405060708090A'
0000081C  01020304 05060708                       4493          DC    X'0102030405060708090A'
00000826  01020304 05060708                       4494          DC    X'0102030405060708090A'
00000830  11                                      4495          DC    X'11'
00000831  00000000 00000000                       4496 FCB07H   DS    XL(FCBL3211-1)
000008E4  00000000 00000000                       4497 FCB07I   DS    XL(FCBL3211+1)
00000999                      00000999  00000831  4498          ORG   FCB07H
00000831  00010008 0009000B                       4499          DC    X'000100080009000B000C0010'
0000083D                      0000083D  000008E4  4500          ORG   FCB07I
000008E4  00010008 0009000B                       4501          DC    X'000100080009000B000C0010'
000008F0                      000008F0  00000999  4502          ORG   FCB07I+L'FCB07I
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    23

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

00000999  00010008 0009000B                       4504 FCB08A   DC    X'000100080009000B000C0010'
000009A5  00000000 00000000                       4505 FCB08A2  DC    XL(L'FCB08A)'00'
000009B1  88000100 08000900                       4506 FCB08B   DC    X'88000100080009000B000C0010'
000009BE  00000000 00000000                       4507 FCB08B2  DC    XL(L'FCB08B)'00'
000009CB  CF000100 08000900                       4508 FCB08C   DC    X'CF000100080009000B000C0010'
000009D8  00000000 00000000                       4509 FCB08C2  DC    XL(L'FCB08C)'00'

000009E5  D7D9E3F0 F9C1                           4511 PRT09A   DC    C'PRT09A'
000009EB  40404040 4040                           4512 PLB09A   DC    CL(L'PRT09A)' '
000009F1  00                                      4513 CKRD09A  DC    X'00'
000009F4  00000746 00000A04                       4514 DIAG809A DC    A(HCMDPFSZ),A(SIZ09A)
000009FC  00000025 00000004                       4515          DC    A(L'HCMDPFSZ),A(L'SIZ09A)
00000A04  81814040                                4516 SIZ09A   DC    CL4'aa'
00000A08  D7D9E3F0 F9C2                           4517 PRT09B   DC    C'PRT09B'
00000A0E  40404040 4040                           4518 PLB09B   DC    CL(L'PRT09B)' '
00000A14  00                                      4519 CKRD09B  DC    X'00'
00000A18  00000746 00000A28                       4520 DIAG809B DC    A(HCMDPFSZ),A(SIZ09B)
00000A20  00000025 00000004                       4521          DC    A(L'HCMDPFSZ),A(L'SIZ09B)
00000A28  82824040                                4522 SIZ09B   DC    CL4'bb'
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    24

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4524 ***********************************************************************
                                                  4525 *        Test Channel Programs
                                                  4526 ***********************************************************************

00000A30  07600001 00000A30                       4528 CHPGM01A CCW1  DIAGGATE,*,CC+SLI,1
00000A38  06600001 0000076B                       4529          CCW1  CHKREAD,CKRD01A,CC+SLI,L'CKRD01A
00000A40  04300001 00000738                       4530          CCW1  SENSECMD,SENSE,SLI+SKIP,1
00000A48  0B600001 00000A48                       4531 CHPGM01B CCW1  SP1NOW,*,CC+SLI,1
00000A50  07600001 00000A50                       4532          CCW1  DIAGGATE,*,CC+SLI,1
00000A58  06600001 0000076C                       4533          CCW1  CHKREAD,CKRD01B,CC+SLI,L'CKRD01B
00000A60  04300001 00000738                       4534          CCW1  SENSECMD,SENSE,SLI+SKIP,1

00000A68  6320000C 0000073A                       4536 CHPGM02A CCW1  LOADFCB,TESTFCB,SLI,L'TESTFCB
00000A70  93200001 00000A70                       4537 CHPGM02B CCW1  SKP2NOW,*,SLI,1

00000A78  6360000C 0000073A                       4539 CHPGM03A CCW1  LOADFCB,TESTFCB,CC+SLI,L'TESTFCB
00000A80  E3600001 00000A80                       4540          CCW1  SKP12NOW,*,CC+SLI,1
00000A88  1B600001 00000A88                       4541          CCW1  SP3NOW,*,CC+SLI,1
00000A90  0B200001 00000A90                       4542          CCW1  SP1NOW,*,SLI,1
00000A98  8B200001 00000A98                       4543 CHPGM03B CCW1  SKP1NOW,*,SLI,1

00000AA0  6360000C 0000073A                       4545 CHPGM04A CCW1  LOADFCB,TESTFCB,CC+SLI,L'TESTFCB
00000AA8  E3600001 00000AA8                       4546          CCW1  SKP12NOW,*,CC+SLI,1
00000AB0  1B600001 00000AB0                       4547          CCW1  SP3NOW,*,CC+SLI,1
00000AB8  0B600001 00000AB8                       4548          CCW1  SP1NOW,*,CC+SLI,1
00000AC0  01200006 000007AC                       4549          CCW1  SP0AFTER,PRT04A,SLI,L'PRT04A
00000AC8  8B200001 00000AC8                       4550 CHPGM04B CCW1  SKP1NOW,*,SLI,1

00000AD0  6360000C 0000073A                       4552 CHPGM05A CCW1  LOADFCB,TESTFCB,CC+SLI,L'TESTFCB
00000AD8  C3600001 00000AD8                       4553          CCW1  SKP8NOW,*,CC+SLI,1
00000AE0  19000006 000007C8                       4554          CCW1  SP3AFTER,PRT05A,0,L'PRT05A
00000AE8  C3600001 00000AE8                       4555 CHPGM05B CCW1  SKP8NOW,*,CC+SLI,1
00000AF0  13200001 00000AF0                       4556          CCW1  SP2NOW,*,SLI,1

00000AF8  6360000C 0000073A                       4558 CHPGM06A CCW1  LOADFCB,TESTFCB,CC+SLI,L'TESTFCB
00000B00  DB600001 00000B00                       4559          CCW1  SKP11NOW,*,CC+SLI,1
00000B08  1B200001 00000B08                       4560          CCW1  SP3NOW,*,SLI,1
00000B10  DB600001 00000B10                       4561 CHPGM06B CCW1  SKP11NOW,*,CC+SLI,1
00000B18  11200006 000007CE                       4562          CCW1  SP2AFTER,PRT06B,SLI,L'PRT06B
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    25

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

00000B20  63200020 000007D4                       4564 CHPGM07A CCW1  LOADFCB,FCB07A,SLI,L'FCB07A
00000B28  6320000C 000007F4                       4565 CHPGM07D CCW1  LOADFCB,FCB07D,SLI,L'FCB07D
00000B30  6320000C 00000800                       4566 CHPGM07E CCW1  LOADFCB,FCB07E,SLI,L'FCB07E
00000B38  FB200006 0000080C                       4567 CHPGM07F CCW1  LOADUCS,UCS07F,SLI,L'UCS07F
00000B40  6320001F 00000812                       4568 CHPGM07G CCW1  LOADFCB,FCB07G,SLI,L'FCB07G
00000B48  630000B3 00000831                       4569 CHPGM07H CCW1  LOADFCB,FCB07H,0,L'FCB07H
00000B50  630000B5 000008E4                       4570 CHPGM07I CCW1  LOADFCB,FCB07I,0,L'FCB07I

00000B58  6360000C 00000999                       4572 CHPGM08A CCW1  LOADFCB,FCB08A,CC+SLI,L'FCB08A
00000B60  07600001 00000B60                       4573          CCW1  DIAGGATE,*,CC+SLI,1
00000B68  1220000C 000009A5                       4574          CCW1  READFCB,FCB08A2,SLI,L'FCB08A2
00000B70  6360000D 000009B1                       4575 CHPGM08B CCW1  LOADFCB,FCB08B,CC+SLI,L'FCB08B
00000B78  07600001 00000B78                       4576          CCW1  DIAGGATE,*,CC+SLI,1
00000B80  1220000D 000009BE                       4577          CCW1  READFCB,FCB08B2,SLI,L'FCB08B2
00000B88  6360000D 000009CB                       4578 CHPGM08C CCW1  LOADFCB,FCB08C,CC+SLI,L'FCB08C
00000B90  07600001 00000B90                       4579          CCW1  DIAGGATE,*,CC+SLI,1
00000B98  1220000D 000009D8                       4580          CCW1  READFCB,FCB08C2,SLI,L'FCB08C2

00000BA0  6360000C 0000073A                       4582 CHPGM09A CCW1  LOADFCB,TESTFCB,CC+SLI,L'TESTFCB
00000BA8  09400006 000009E5                       4583          CCW1  SP1AFTER,PRT09A,CC,L'PRT09A
00000BB0  02600006 000009EB                       4584          CCW1  READPLB,PLB09A,CC+SLI,L'PLB09A
00000BB8  07600001 00000BB8                       4585          CCW1  DIAGGATE,*,CC+SLI,1
00000BC0  06200001 000009F1                       4586          CCW1  CHKREAD,CKRD09A,SLI,L'CKRD09A
00000BC8  05400006 00000A08                       4587 CHPGM09B CCW1  WRITEPLB,PRT09B,CC,L'PRT09B
00000BD0  02600006 00000A0E                       4588          CCW1  READPLB,PLB09B,CC+SLI,L'PLB09B
00000BD8  07600001 00000BD8                       4589          CCW1  DIAGGATE,*,CC+SLI,1
00000BE0  06200001 00000A14                       4590          CCW1  CHKREAD,CKRD09B,SLI,L'CKRD09B
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    26

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4592 ***********************************************************************
                                                  4593 *        Test control flags:   X'00' = skip test, otherwise do test
                                                  4594 ***********************************************************************

00000BE8                      00000BE8  00000FF0  4596          ORG   TEST3211+4096-16   (s/b @ X'FF0')
00000FF0                                          4597 DOFLAGS  DS   0XL16               (s/b @ X'FF0')


00000FF0  00                                      4599          DC    X'00'            TEST00

00000FF1  F1                                      4601          DC    C'1'             TEST01
00000FF2  F2                                      4602          DC    C'2'             TEST02
00000FF3  F3                                      4603          DC    C'3'             TEST03
00000FF4  F4                                      4604          DC    C'4'             TEST04
00000FF5  F5                                      4605          DC    C'5'             TEST05
00000FF6  F6                                      4606          DC    C'6'             TEST06
00000FF7  F7                                      4607          DC    C'7'             TEST07
00000FF8  F8                                      4608          DC    C'8'             TEST08
00000FF9  F9                                      4609          DC    C'9'             TEST09

00000FFA  00                                      4611          DC    X'00'            TEST10
00000FFB  00                                      4612          DC    X'00'            TEST11
00000FFC  00                                      4613          DC    X'00'            TEST12
00000FFD  00                                      4614          DC    X'00'            TEST13
00000FFE  00                                      4615          DC    X'00'            TEST14
00000FFF  00                                      4616          DC    X'00'            TEST15
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    27

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4618 ***********************************************************************
                                                  4619 *        Test results flags:   X'00' = Success,  Other = Failure
                                                  4620 ***********************************************************************

00001000                      00001000  00001000  4622          ORG   TEST3211+4096      (s/b @ X'1000')
00001000                                          4623 RCFLAGS  DS   0XL16               (s/b @ X'1000')
00001000  FFFFFFFF FFFFFFFF                       4624          DC      16X'FF'          (s/b @ X'1000')


                              00001000  00000010  4626 FLAG00   EQU   RCFLAGS+0        TEST00

                              00001001  00000010  4628 FLAG01   EQU   RCFLAGS+1        TEST01
                              00001002  00000010  4629 FLAG02   EQU   RCFLAGS+2        TEST02
                              00001003  00000010  4630 FLAG03   EQU   RCFLAGS+3        TEST03
                              00001004  00000010  4631 FLAG04   EQU   RCFLAGS+4        TEST04
                              00001005  00000010  4632 FLAG05   EQU   RCFLAGS+5        TEST05
                              00001006  00000010  4633 FLAG06   EQU   RCFLAGS+6        TEST06
                              00001007  00000010  4634 FLAG07   EQU   RCFLAGS+7        TEST07
                              00001008  00000010  4635 FLAG08   EQU   RCFLAGS+8        TEST08
                              00001009  00000010  4636 FLAG09   EQU   RCFLAGS+9        TEST09

                              0000100A  00000010  4638 FLAG10   EQU   RCFLAGS+10       TEST10
                              0000100B  00000010  4639 FLAG11   EQU   RCFLAGS+11       TEST11
                              0000100C  00000010  4640 FLAG12   EQU   RCFLAGS+12       TEST12
                              0000100D  00000010  4641 FLAG13   EQU   RCFLAGS+13       TEST13
                              0000100E  00000010  4642 FLAG14   EQU   RCFLAGS+14       TEST14
                              0000100F  00000010  4643 FLAG15   EQU   RCFLAGS+15       TEST15
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    28

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4645 ***********************************************************************
                                                  4646 *        IOCB DSECT
                                                  4647 ***********************************************************************

                                                  4649          DSECTS NAME=IOCB
                                                  4651+IOCB     DSECT
                                                  4652+*     Field usage by: CH SC Description (R->program read-only, X->program read/write)
00000000                                          4653+IOCBDID  DS    0F  +0     R  Device Identifier - Subsystem ID for channel subsystem
00000000  0000                                    4654+         DS    H   +0  R       reserved - must be zeros
00000002  0000                                    4655+IOCBDV   DS    H   +2  R       Channel Unit Device address of I/O operation
00000004  0000                                    4656+IOCBDEV  DS    H   +4  X  X  Device address or device number (R after ENADEV)
00000006  0000                                    4657+IOCBZERO DS    H   +6  R  R  Must be zeros
00000008  00                                      4658+IOCBUM   DS    X   +8  X  X  Unit status test mask
00000009  00                                      4659+IOCBCM   DS    X   +9  X  X  Channel status test mask
0000000A                                          4660+IOCBST   DS    0H  +10 X  X  Input/Output unit and channel status accumulation
0000000A  00                                      4661+IOCBUS   DS    X   +10 R  R  Accumulated unit status
0000000B  00                                      4662+IOCBCS   DS    X   +11 R  R  Accumulated channel status
0000000C  00                                      4663+IOCBUT   DS    X   +14 R  R  Used to test unit status
0000000D  00                                      4664+IOCBCT   DS    X   +13 R  R  Used to test channel status
0000000E  00                                      4665+IOCBSC   DS    X   +14    R  Accumulted subchanel status control
0000000F  00                                      4666+IOCBWAIT DS    X   +15 X  X  Recognized unsolicited interruption unit status events
00000010  00000000                                4667+IOCBSCCW DS    A   +16 R  R  I/O status CCW address
00000014                                          4668+IOCBSCNT DS    0F  +20 R  R  I/O status residual count as a positive full word
00000014  0000                                    4669+         DS    H   +20 R     reserved must be zeros
00000016  0000                                    4670+IOCBRCNT DS    H   +22 R     I/O status residual count as an unsigned halfword
00000018                                          4671+IOCBCAW  DS    0A  +24 X     Channel Address word
00000018  00000000 00000000                       4672+IOCBORB  DS    AD  +24    X  Address of the ORB for channel subsystem I/O
00000020  00000000 00000000                       4673+IOCBIRB  DS    AD  +32    X  Channel subsystem IRB address
00000028  00000000 00000000                       4674+IOCBSIB  DS    AD  +40    X  Channel subsystem SCHIB address
                              00000030  00000001  4675+IOCBL    EQU   *-IOCB  Length of IOCB control block (48) without embedded structures
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    29

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4677 ***********************************************************************
                                                  4678 *        ORB DSECT
                                                  4679 ***********************************************************************

                                                  4681          DSECTS NAME=ORB
                                                  4683+ORB      DSECT
00000000  00000000                                4684+ORBPARM  DC    F'0'     Word 0, bits 0-31

00000004  00                                      4686+ORB1_0   DC    X'00'    Word 1, bits 0-7
                              000000F0  00000001  4687+ORBKEYM  EQU   X'F0'    Word 1, bits 0-3   - Storage Key Mask
                              00000008  00000001  4688+ORBS     EQU   X'08'    Word 1, bit 4      - Suspend Control
                              00000004  00000001  4689+ORBC     EQU   X'04'    Word 1, bit 5      - Streaming Mode Control
                              00000002  00000001  4690+ORBM     EQU   X'02'    Word 1, bit 6      - Modification Control
                              00000001  00000001  4691+ORBY     EQU   X'01'    Word 1, bit 7      - Synchronization Control

00000005  00                                      4693+ORB1_8   DC    X'00'    Word 1, bits 8-15
                              00000080  00000001  4694+ORBF     EQU   X'80'    Word 1, bit 8      - CCW Format-Control
                              00000040  00000001  4695+ORBP     EQU   X'40'    Word 1, bit 9      - Pre-fetch control
                              00000020  00000001  4696+ORBI     EQU   X'20'    Word 1, bit 10     - Initial-status Interruption Control
                              00000010  00000001  4697+ORBA     EQU   X'10'    Word 1, bit 11     - Address Limit Checking Control
                              00000008  00000001  4698+ORBU     EQU   X'08'    Word 1, bit 12     - Suppress-suspended-interruption control
                              00000004  00000001  4699+ORBB     EQU   X'04'    Word 1, bit 13     - Channel-Program-Type Control
                              00000002  00000001  4700+ORBH     EQU   X'02'    Word 1, bit 14     - Format 2-IDAW Control
                              00000001  00000001  4701+ORBT     EQU   X'01'    Word 1, bit 15     - 2K-IDAW control
00000006  00                                      4702+ORBLPM   DC    X'00'    Word 1, bits 16-23 - Logical Path Mask
00000007  00                                      4703+ORRB1_24 DC    X'00'    Word 1, bits 24-31
                              00000080  00000001  4704+ORBL     EQU   X'80'    Word 1, bit 24     - Incorrect Length Suppression Mode
                              0000007F  00000001  4705+ORBRSV3  EQU   X'7F'    Word 1, bits 25-31 - reserved must be zeros
                              00000040  00000001  4706+ORBD     EQU   X'40'    Word 1, bit 25     - MIDAW Addressing Control
                              0000003E  00000001  4707+ORBRSV26 EQU   X'3E'    Word 1, bits 26-30 - reserved must be zeros
                              0000007E  00000001  4708+ORBRSV25 EQU   X'7E'    Word 1, bits 25-30 - reserved must be zeros
                              00000001  00000001  4709+ORBX     EQU   X'01'    Word 1, bit 31     - ORB-extension control

00000008  00000000                                4711+ORBCCW   DC    A(0)     Word 2, bits 1-31  - Channel Program Address
                              00000080  00000001  4712+ORBRSV4  EQU   X'80'    Word 2, bit 0      - reserved must be zero
                              0000000C  00000001  4713+ORBLEN   EQU   *-ORB Length of standard ORB
                                                  4714+* Extended ORB fields
0000000C  00                                      4715+ORBCSS   DC    X'00'    Word 3, bits 0-7   - Channel Subsystem Priority
0000000D  00                                      4716+ORBRSV5  DC    X'00'    Word 3, bits 8-15  - reserved must be zeros
0000000E                                          4717+ORBPGM   DC    0X'00'   Word 3, bits 16-23 - Transport mode reserves for program use
0000000E  00                                      4718+ORBCU    DC    X'00'    Word 3, bits 16-23 - Control Unit Priority
0000000F  00                                      4719+ORBRSV6  DC    X'00'    Word 3, bits 24-31 - reserved must be zeros
00000010  00000000 00000000                       4720+ORBRSV7  DC    XL16'00' Words 4-7          - reserved must be zeros
                              00000020  00000001  4721+ORBXLEN  EQU   *-ORB Length of extended ORB

ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    30

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4724 ***********************************************************************
                                                  4725 *        IRB DSECT
                                                  4726 ***********************************************************************

                                                  4728          DSECTS NAME=IRB
                                                  4730+IRB      DSECT Interruption          Response Block
00000000  00000000 00000000                       4731+IRBSCSW  DC    XL12'00' Words 0-2 - Subchannel Status Word (Defined by DSECT SCSW)
0000000C  00000000 00000000                       4732+IRBESW   DC    XL20'00' Words 3-7 - Extended Status Word
00000020  00000000 00000000                       4733+IRBECW   DC    XL32'00' Words 8-15 - Extended Control Word
                              00000040  00000001  4734+IRBL     EQU   *-IRB    IRB Length
00000040  00000000 00000000                       4735+IRBEMW   DC    XL32'00' Words 16-23 - Extended Measurement Word
                              00000060  00000001  4736+IRBXL    EQU   *-IRB    Extended IRB Length

ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    31

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4739 ***********************************************************************
                                                  4740 *        SCSW DSECT
                                                  4741 ***********************************************************************

                                                  4743          DSECTS NAME=SCSW
                                                  4745+SCSW     DSECT Subchannel          Status Word
00000000  00                                      4746+SCSWFLAG DC    X'00'    Flags
                              000000F0  00000001  4747+SCSWKEYM EQU   X'F0'    Storage Key Mask of subchannel storage key
                              00000008  00000001  4748+SCSWSUSC EQU   X'08'    Suspend Control
                              00000004  00000001  4749+SCSWESWF EQU   X'04'    Extended Status Word Format
                              00000003  00000001  4750+SCSWDCCM EQU   X'03'    Deferred condiont code mask
                              00000000  00000001  4751+SCSWDCC0 EQU   X'00'    Normal I/O interruption
                              00000001  00000001  4752+SCSWDCC1 EQU   X'01'    Deferred condition code is 1
                              00000003  00000001  4753+SCSWDCC3 EQU   X'03'    Deferred condition code is 3

00000001  00                                      4755+SCSWCTLS DC    X'00'    General Controls
                              00000080  00000001  4756+SCSWCCWF EQU   X'80'    CCW Format control when ...
                              00000040  00000001  4757+SCSWCCWP EQU   X'40'    CCW Prefetch Control
                              00000020  00000001  4758+SCSWISIC EQU   X'20'    Initial-Status-Interruption Control
                              00000010  00000001  4759+SCSWALKC EQU   X'10'    Address-Limit-Checking Control
                              00000008  00000001  4760+SCSWSSIC EQU   X'08'    Suppress suspended interruption
                              00000004  00000001  4761+SCSW0CC  EQU   X'04'    Zero-Condition Code
                              00000002  00000001  4762+SCSWECWC EQU   X'02'    Extended Control Word control
                              00000001  00000001  4763+SCSWPNOP EQU   X'01'    Path Not Operational

00000002  00                                      4765+SCSW1    DC    X'00'    Control Byte 1
                              00000070  00000001  4766+SCSWFM   EQU   X'70'    Functional Control Mask
                              00000040  00000001  4767+SCSWFS   EQU   X'40'    Function Control - Start Function
                              00000020  00000001  4768+SCSWFH   EQU   X'20'    Function Control - Halt Function
                              00000010  00000001  4769+SCSWFC   EQU   X'10'    Function Control - Clear Function
                              00000008  00000001  4770+SCSWARP  EQU   X'08'    Activity Control - Resume pending
                              00000004  00000001  4771+SCSWASP  EQU   X'04'    Activity Control - Start pending
                              00000002  00000001  4772+SCSWAHP  EQU   X'02'    Activity Control - Halt pending
                              00000001  00000001  4773+SCSWACP  EQU   X'01'    Activity Control - Clear pending
00000003  00                                      4774+SCSW2    DC    X'00'    Control Byte 2
                              00000080  00000001  4775+SCSWASA  EQU   X'80'    Activity Control - Subchannel Active
                              00000040  00000001  4776+SCSWADA  EQU   X'40'    Activity Control - Device Active
                              00000020  00000001  4777+SCSWASUS EQU   X'20'    Activity Control - Suspended
                              00000010  00000001  4778+SCSWSAS  EQU   X'10'    Status Control   - Alert Status
                              00000008  00000001  4779+SCSWSINT EQU   X'08'    Status Control   - Intermediate Status
                              00000004  00000001  4780+SCSWSPRI EQU   X'04'    Status Control   - Primary Status
                              00000002  00000001  4781+SCSWSSEC EQU   X'02'    Status Control   - Secondary Status
                              00000001  00000001  4782+SCSWSPEN EQU   X'01'    Status Control   - Status Pending

00000004  00000000                                4784+SCSWCCW  DC    A(0)     CCW Address

00000008  00                                      4786+SCSWUS   DC    X'00'    Unit Status
                              00000080  00000001  4787+SCSWATTN EQU   X'80'    Attention
                              00000040  00000001  4788+SCSWSM   EQU   X'40'    Status modifier
                              00000020  00000001  4789+SCSWCUE  EQU   X'20'    Control-unit end
                              00000010  00000001  4790+SCSWBUSY EQU   X'10'    Busy
                              00000008  00000001  4791+SCSWCE   EQU   X'08'    Channel end
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    32

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                              00000004  00000001  4792+SCSWDE   EQU   X'04'    Device end
                              00000002  00000001  4793+SCSWUC   EQU   X'02'    Unit check
                              00000001  00000001  4794+SCSWUX   EQU   X'01'    Unit exception

00000009  00                                      4796+SCSWCS   DC    X'00'    Channel Status
                              00000080  00000001  4797+SCSWPCI  EQU   X'80'    Program-controlled interruption
                              00000040  00000001  4798+SCSWIL   EQU   X'40'    Incorrect length
                              00000020  00000001  4799+SCSWPRGM EQU   X'20'    Program check
                              00000010  00000001  4800+SCSWPROT EQU   X'10'    Protection Check
                              00000008  00000001  4801+SCSWCDAT EQU   X'08'    Channel-data check
                              00000004  00000001  4802+SCSWCCTL EQU   X'04'    Channel-control check
                              00000002  00000001  4803+SCSWICTL EQU   X'02'    Interface-control check
                              00000001  00000001  4804+SCSWCHNG EQU   X'01'    Chaining check

0000000A  0000                                    4806+SCSWCNT  DC    H'0'     Residual CCW count
                              0000000C  00000001  4807+SCSWL    EQU   *-SCSW

ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    33

  LOC        OBJECT CODE       ADDR1     ADDR2    STMT

                                                  4810 ***********************************************************************
                                                  4811 *        (other DSECTS needed by SATK)
                                                  4812 ***********************************************************************

                                                  4814          DSECTS PRINT=OFF,NAME=(ASA,SCHIB,CCW0,CCW1)








                                                  5053          PRINT ON





                                                  5055 ***********************************************************************
                                                  5056 *        Register equates
                                                  5057 ***********************************************************************


                              00000000  00000001  5059 R0       EQU   0
                              00000001  00000001  5060 R1       EQU   1
                              00000002  00000001  5061 R2       EQU   2
                              00000003  00000001  5062 R3       EQU   3
                              00000004  00000001  5063 R4       EQU   4
                              00000005  00000001  5064 R5       EQU   5
                              00000006  00000001  5065 R6       EQU   6
                              00000007  00000001  5066 R7       EQU   7
                              00000008  00000001  5067 R8       EQU   8
                              00000009  00000001  5068 R9       EQU   9
                              0000000A  00000001  5069 R10      EQU   10
                              0000000B  00000001  5070 R11      EQU   11
                              0000000C  00000001  5071 R12      EQU   12
                              0000000D  00000001  5072 R13      EQU   13
                              0000000E  00000001  5073 R14      EQU   14
                              0000000F  00000001  5074 R15      EQU   15



                                                  5076          END
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    34

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

ASA                 4    000000     512  4818  3752
ASBEGIN             U    000000       1  4819  4824  4866  4902  4911  4929  4936  4942  4946  4950  4956  4973
ASEND               U    000200       1  4972  4973
ASLENGTH            U    000200       1  4973
BCEXTCOD            H    00001A       2  4836
BCIOCOD             H    00003A       2  4844
BCMCKCOD            H    000032       2  4842
BCPGMCOD            H    00002A       2  4840
BCSVCCOD            H    000022       2  4838
BEGIN               I    000200       2  3758  3727  3753
CAW                 F    000048       4  4848
CAWADDR             R    000049       3  4851
CAWKEY              X    000048       1  4849
CAWSUSP             U    000008       1  4850
CC                  U    000040       1  4413  4528  4529  4531  4532  4533  4539  4540  4541  4545  4546  4547  4548  4552  4553
                                               4555  4558  4559  4561  4572  4573  4575  4576  4578  4579  4582  4583  4584  4585
                                               4587  4588  4589
CCW0                4    000000       8  4977  4983
CCW0ADDR            R    000001       3  4979
CCW0CNT             H    000006       2  4982
CCW0CODE            X    000000       1  4978
CCW0FLGS            X    000004       1  4980
CCW0L               U    000008       1  4983
CCW1                4    000000       8  4995  5000
CCW1ADDR            A    000004       4  4999
CCW1CNT             H    000002       2  4998
CCW1CODE            X    000000       1  4996
CCW1FLGS            X    000001       1  4997
CCW1L               U    000008       1  5000
CCWCC               U    000040       1  4987
CCWCD               U    000080       1  4986
CCWIDA              U    000004       1  4991
CCWPCI              U    000008       1  4990
CCWSKIP             U    000010       1  4989
CCWSLI              U    000020       1  4988
CCWSUSP             U    000002       1  4992
CHANID              F    0000A8       4  4903
CHKREAD             U    000006       1  4421  4529  4533  4586  4590
CHPGM01A            W    000A30       8  4528  3877  4407
CHPGM01B            W    000A48       8  4531  3885
CHPGM02A            W    000A68       8  4536  3910
CHPGM02B            W    000A70       8  4537  3915
CHPGM03A            W    000A78       8  4539  3948
CHPGM03B            W    000A98       8  4543  3956
CHPGM04A            W    000AA0       8  4545  3985
CHPGM04B            W    000AC8       8  4550  3993
CHPGM05A            W    000AD0       8  4552  4026
CHPGM05B            W    000AE8       8  4555  4038
CHPGM06A            W    000AF8       8  4558  4072
CHPGM06B            W    000B10       8  4561  4080
CHPGM07A            W    000B20       8  4564  4122
CHPGM07D            W    000B28       8  4565  4134
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    35

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

CHPGM07E            W    000B30       8  4566  4146
CHPGM07F            W    000B38       8  4567  4158
CHPGM07G            W    000B40       8  4568  4170
CHPGM07H            W    000B48       8  4569  4175
CHPGM07I            W    000B50       8  4570  4180
CHPGM08A            W    000B58       8  4572  4212
CHPGM08B            W    000B70       8  4575  4220
CHPGM08C            W    000B88       8  4578  4228
CHPGM09A            W    000BA0       8  4582  4258
CHPGM09B            W    000BC8       8  4587  4269
CKRD01A             X    00076B       1  4461  3882  4529
CKRD01B             X    00076C       1  4462  3890  4533
CKRD09A             X    0009F1       1  4513  4283  4586
CKRD09B             X    000A14       1  4519  4283  4590
CODE                2    000000    4112  3708
CPUID               U    00031B       1  4975
CSW                 F    000040       8  4847
DIAG803A            A    000770       4  4464  3953
DIAG803B            A    000784       4  4467  3961
DIAG804A            A    000798       4  4471  3990
DIAG804B            A    0007B4       4  4475  3998
DIAG809A            A    0009F4       4  4514  4266
DIAG809B            A    000A18       4  4520  4277
DIAGGATE            U    000007       1  4422  4528  4532  4573  4576  4579  4585  4589
DOFLAGS             X    000FF0      16  4597  3796
DWAT0008            3    000260       8  3806  3805
DWAT0009            3    000270       8  3811  3810
DWAT0011            3    000280       8  3817  3816
ENADEV              I    000296       4  3835  3794
ENAOKAY             I    0002E4       2  3860  3849
EOJ                 H    000278       2  3815  3776
EXCP                I    000620       4  4329  3878  3886  3911  3916  3949  3957  3986  3994  4027  4039  4073  4081  4123  4135
                                               4147  4159  4171  4176  4181  4213  4221  4229  4259  4270
EXCPSENS            I    00061C       4  4327  3920  4031  4043  4127  4139  4151  4163  4298
EXTCPUAD            H    000084       2  4868
EXTICODE            H    000086       2  4869
EXTIPARM            F    000080       4  4867
EXTNPSW             F    000058       8  4857
EXTOPSW             F    000018       8  4829  4835
FAIL                H    00025C       2  3804  3775  3840  3850  3855  4338  4361  4371
FAILD8              H    000268       2  3809  4316
FCB07A              X    0007D4      32  4483  4564
FCB07D              X    0007F4      12  4488  4565
FCB07E              X    000800      12  4489  4566
FCB07G              X    000812      31  4491  4568
FCB07H              X    000831     179  4496  4498  4569
FCB07I              X    0008E4     181  4497  4500  4502  4570
FCB08A              X    000999      12  4504  4505  4217  4572
FCB08A2             X    0009A5      12  4505  4217  4574
FCB08B              X    0009B1      13  4506  4507  4225  4575
FCB08B2             X    0009BE      13  4507  4225  4577
FCB08C              X    0009CB      13  4508  4509  4233  4578
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    36

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

FCB08C2             X    0009D8      13  4509  4233  4580
FCBL3211            U    0000B4       1  4428  4496  4497
FIND0013            A    0002DC       4  3857  3835
FINL0013            H    00029E       2  3838  3854
FINM0013            A    0002E0       4  3858  3853
FINN0013            H    0002CC       2  3851  3842  3844
FLAG00              U    001000      16  4626
FLAG01              U    001001      16  4628  3874  3893
FLAG02              U    001002      16  4629  3907  3929
FLAG03              U    001003      16  4630  3945  3967
FLAG04              U    001004      16  4631  3982  4004
FLAG05              U    001005      16  4632  4023  4050
FLAG06              U    001006      16  4633  4069  4088
FLAG07              U    001007      16  4634  4119  4185
FLAG08              U    001008      16  4635  4209  4236
FLAG09              U    001009      16  4636  4255  4286
FLAG10              U    00100A      16  4638
FLAG11              U    00100B      16  4639
FLAG12              U    00100C      16  4640
FLAG13              U    00100D      16  4641
FLAG14              U    00100E      16  4642
FLAG15              U    00100F      16  4643
HCMD                I    0005E4       4  4307  3954  3962  3991  3999  4267  4278
HCMDPFSZ            C    000746      37  4459  4464  4465  4467  4468  4471  4472  4475  4476  4514  4515  4520  4521
HCMDSAVE            F    000608       4  4321  4307  4318
IIRB0016            F    0006E4       4  4399  4395  4397
IMAGE               1    000000    4112     0
INIT                H    00023C       2  3782  3762
IOCB                4    000000      48  4651  4675  3754
IOCBCAW             A    000018       4  4671
IOCBCM              X    000009       1  4659
IOCBCS              X    00000B       1  4662
IOCBCT              X    00000D       1  4664
IOCBDEV             H    000004       2  4656  3843
IOCBDID             F    000000       4  4653  3846  4334
IOCBDV              H    000002       2  4655
IOCBIRB             A    000020       8  4673  3788  4339
IOCBL               U    000030       1  4675
IOCBORB             A    000018       8  4672  3787  4336
IOCBRCNT            H    000016       2  4670  4368
IOCBSC              X    00000E       1  4665  4332  4363  4365
IOCBSCCW            A    000010       4  4667  4367
IOCBSCNT            F    000014       4  4668
IOCBSIB             A    000028       8  4674  3836
IOCBST              H    00000A       2  4660  4333  4364
IOCBUM              X    000008       1  4658
IOCBUS              X    00000A       1  4661  4370
IOCBUT              X    00000C       1  4663
IOCBWAIT            X    00000F       1  4666
IOCBZERO            H    000006       2  4657  4333
IOCB_00F            A    0006B4       4  4382  3786
IOELADDR            F    0000AC       4  4904
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    37

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

IOICODE             H    0000BA       2  4909
IOIID               F    0000C0       4  4914
IOINIT              I    000288       4  3824  3793
IOIPARM             F    0000BC       4  4913
IOMK0012            F    000290       4  3826  3824  3825
ION0015             3    000660       8  4349  4346
IONPSW              F    000078       8  4861
IOOPSW              F    000038       8  4833  4843
IORB0016            X    000724      12  4401  4393
IOS0015             X    000668       8  4350  4345  4353
IOSSID              F    0000B8       4  4912  4356
IOWT0014            H    000642       2  4343  4357  4360  4366
IPLCCW1             F    000008       8  4821
IPLCCW2             F    000010       8  4822
IPLPSW              F    000000       8  4820
IRB                 4    000000      96  4730  4734  4736  3789  4340
IRBECW              X    000020      32  4733
IRBEMW              X    000040      32  4735
IRBESW              X    00000C      20  4732
IRBL                U    000040       1  4734
IRBSCSW             X    000000      12  4731  3790  4363  4364  4367  4368
IRBXL               U    000060       1  4736
IRST0015            H    000670       2  4352  4349
LCHANLOG            F    0000B0       4  4905
LOADFCB             U    000063       1  4425  4536  4539  4545  4552  4558  4564  4565  4566  4568  4569  4570  4572  4575  4578
                                               4582
LOADUCS             U    0000FB       1  4426  4567
MCKLOG              F    000100       4  4937
MCKNPSW             F    000070       8  4860
MCKOPSW             F    000030       8  4832  4841
MEASUREB            X    0000B9       1  4908
MKARCHMD            X    0000A3       1  4896
MKARS               F    000120       4  4935
MKCLKCMP            F    0000E0       8  4921
MKCPUTIM            F    0000D8       8  4920
MKCRS               F    0001C0       4  4940
MKDMGCOD            F    0000F4       4  4924
MKFAILA             F    0000F8       4  4926
MKFPRS              D    000160       8  4938
MKICODE             F    0000E8       4  4922
MKLOGOUT            F    000100       4  4928
MKMODEL             F    0000FC       4  4927
MKXSAA              F    0000D4       4  4919
MONCLS              H    000094       2  4884
MONCODE             F    00009C       4  4891
MONNUMBR            X    000095       1  4886
MPGACCID            X    0000A2       1  4894
NKGRS               F    000180       4  4939
NOPCMD              U    000003       1  4418
ORB                 4    000000      32  4683  4713  4721  3755
ORB1_0              X    000004       1  4686
ORB1_8              X    000005       1  4693
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    38

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

ORBA                U    000010       1  4697
ORBB                U    000004       1  4699
ORBC                U    000004       1  4689
ORBCCW              A    000008       4  4711  4329
ORBCSS              X    00000C       1  4715
ORBCU               X    00000E       1  4718
ORBD                U    000040       1  4706
ORBF                U    000080       1  4694
ORBH                U    000002       1  4700
ORBI                U    000020       1  4696
ORBKEYM             U    0000F0       1  4687
ORBL                U    000080       1  4704
ORBLEN              U    00000C       1  4713
ORBLPM              X    000006       1  4702
ORBM                U    000002       1  4690
ORBP                U    000040       1  4695
ORBPARM             F    000000       4  4684
ORBPGM              X    00000E       1  4717
ORBRSV25            U    00007E       1  4708
ORBRSV26            U    00003E       1  4707
ORBRSV3             U    00007F       1  4705
ORBRSV4             U    000080       1  4712
ORBRSV5             X    00000D       1  4716
ORBRSV6             X    00000F       1  4719
ORBRSV7             X    000010      16  4720
ORBS                U    000008       1  4688
ORBT                U    000001       1  4701
ORBU                U    000008       1  4698
ORBX                U    000001       1  4709
ORBXLEN             U    000020       1  4721
ORBY                U    000001       1  4691
ORRB1_24            X    000007       1  4703
PCFETO              A    0000C4       4  4915
PERACCID            X    0000A1       1  4893
PERADDR             F    000098       4  4890
PERCODE             X    000096       1  4887
PERCODMK            U    0000F0       1  4888
PGMACCID            X    0000A0       1  4892
PGMDXC              F    000090       4  4882
PGMICODE            H    00008E       2  4881
PGMIID              F    00008C       4  4877
PGMIILC             X    00008D       1  4879
PGMIILCM            U    00000C       1  4880
PGMNPSW             F    000068       8  4859
PGMOPSW             F    000028       8  4831  4839
PGMTRX              F    000090       4  4883
PLB09A              C    0009EB       6  4512  4263  4584
PLB09B              C    000A0E       6  4518  4274  4588
PMCW1_0             X    000004       1  5007
PMCW1_8             X    000005       1  5010  3841  3847
PMCWB               U    000004       1  5042
PMCWCHP0            X    000010       1  5031
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    39

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

PMCWCHP1            X    000011       1  5032
PMCWCHP2            X    000012       1  5033
PMCWCHP3            X    000013       1  5034
PMCWCHP4            X    000014       1  5035
PMCWCHP5            X    000015       1  5036
PMCWCHP6            X    000016       1  5037
PMCWCHP7            X    000017       1  5038
PMCWDNUM            H    000006       2  5022  3843
PMCWE               U    000080       1  5011  3847
PMCWEXC             X    00001B       1  5041
PMCWIP              F    000000       4  5006
PMCWISCM            U    000038       1  5008
PMCWLM              U    000060       1  5012
PMCWLMG             U    000020       1  5013
PMCWLML             U    000040       1  5014
PMCWLPM             X    000008       1  5024
PMCWLPUM            X    00000A       1  5026
PMCWM               U    000004       1  5018
PMCWMBI             H    00000C       2  5028
PMCWMM              U    000018       1  5015
PMCWMMC             U    000008       1  5017
PMCWMME             U    000010       1  5016
PMCWPAM             X    00000F       1  5030
PMCWPIM             X    00000B       1  5027
PMCWPNOM            X    000009       1  5025
PMCWPOM             X    00000E       1  5029
PMCWRES1            X    000018       4  5039
PMCWRES2            X    000018       3  5040
PMCWS               U    000001       1  5044
PMCWT               U    000002       1  5019
PMCWV               U    000001       1  5020  3841
PMCWX               U    000002       1  5043
PRT04A              C    0007AC       6  4474  4549
PRT05A              C    0007C8       6  4479  4554
PRT06B              C    0007CE       6  4481  4562
PRT09A              C    0009E5       6  4511  4512  4263  4583
PRT09B              C    000A08       6  4517  4518  4274  4587
R0                  U    000000       1  5059  3752  3877  3885  3910  3915  3948  3953  3956  3961  3985  3990  3993  3998  4026
                                               4038  4072  4080  4122  4134  4146  4158  4170  4175  4180  4212  4220  4228  4258
                                               4266  4269  4277  4309  4327  4329
R1                  U    000001       1  5060
R10                 U    00000A       1  5069  4307  4309  4310  4311  4312  4313  4318
R11                 U    00000B       1  5070
R12                 U    00000C       1  5071
R13                 U    00000D       1  5072
R14                 U    00000E       1  5073  3762  3764  3765  3766  3767  3768  3769  3770  3771  3772  3797  3875  3883  3891
                                               3894  3908  3918  3925  3927  3930  3946  3965  3968  3983  4002  4005  4024  4029
                                               4036  4041  4048  4051  4070  4078  4086  4089  4120  4125  4132  4137  4144  4149
                                               4156  4161  4168  4186  4210  4218  4226  4234  4237  4256  4264  4275  4281  4284
                                               4287  4300
R15                 U    00000F       1  5074  3788  3789  3791  3793  3794  3828  3860  3878  3886  3911  3916  3920  3949  3954
                                               3957  3962  3986  3991  3994  3999  4027  4031  4039  4043  4073  4081  4123  4127
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    40

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

                                               4135  4139  4147  4151  4159  4163  4171  4176  4181  4213  4221  4229  4259  4267
                                               4270  4278  4298  4319  4374
R2                  U    000002       1  5061  3753  3758  3759  3760
R3                  U    000003       1  5062  3754  3786
R4                  U    000004       1  5063
R5                  U    000005       1  5064
R6                  U    000006       1  5065  4307  4310  4318
R7                  U    000007       1  5066
R8                  U    000008       1  5067  3755  3787  4313
R9                  U    000009       1  5068  3756  3790  4310
RCFLAGS             X    001000      16  4623  4626  4628  4629  4630  4631  4632  4633  4634  4635  4636  4638  4639  4640  4641
                                               4642  4643  3774  3796
READFCB             U    000012       1  4424  4574  4577  4580
READPLB             U    000002       1  4417  4584  4588
READUCS             U    00000A       1  4423
RSTNPSW             F    000000       8  4825
RSTOPSW             F    000008       8  4826
SCANOUT             X    000080       1  4863  4864
SCANOUTL            U    000000       1  4864
SCHIB               4    000000      52  5003  5050  3837
SCHIBL              U    000034       1  5050
SCHMBA              A    000028       8  5048
SCHMDA1             X    000030       4  5049
SCHMDA3             X    000028      12  5047
SCHPMCW             X    000000      28  5005
SCHSCSW             X    00001C      12  5046
SCSW                4    000000      12  4745  4807  3756
SCSW0CC             U    000004       1  4761
SCSW1               X    000002       1  4765
SCSW2               X    000003       1  4774  4363
SCSWACP             U    000001       1  4773
SCSWADA             U    000040       1  4776
SCSWAHP             U    000002       1  4772
SCSWALKC            U    000010       1  4759
SCSWARP             U    000008       1  4770
SCSWASA             U    000080       1  4775
SCSWASP             U    000004       1  4771
SCSWASUS            U    000020       1  4777
SCSWATTN            U    000080       1  4787
SCSWBUSY            U    000010       1  4790
SCSWCCTL            U    000004       1  4802
SCSWCCW             A    000004       4  4784  4367
SCSWCCWF            U    000080       1  4756
SCSWCCWP            U    000040       1  4757
SCSWCDAT            U    000008       1  4801
SCSWCE              U    000008       1  4791  4370
SCSWCHNG            U    000001       1  4804
SCSWCNT             H    00000A       2  4806  4368
SCSWCS              X    000009       1  4796
SCSWCTLS            X    000001       1  4755
SCSWCUE             U    000020       1  4789
SCSWDCC0            U    000000       1  4751
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    41

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

SCSWDCC1            U    000001       1  4752
SCSWDCC3            U    000003       1  4753
SCSWDCCM            U    000003       1  4750
SCSWDE              U    000004       1  4792  4370
SCSWECWC            U    000002       1  4762
SCSWESWF            U    000004       1  4749
SCSWFC              U    000010       1  4769
SCSWFH              U    000020       1  4768
SCSWFLAG            X    000000       1  4746
SCSWFM              U    000070       1  4766
SCSWFS              U    000040       1  4767
SCSWICTL            U    000002       1  4803
SCSWIL              U    000040       1  4798
SCSWISIC            U    000020       1  4758
SCSWKEYM            U    0000F0       1  4747
SCSWL               U    00000C       1  4807
SCSWPCI             U    000080       1  4797
SCSWPNOP            U    000001       1  4763
SCSWPRGM            U    000020       1  4799
SCSWPROT            U    000010       1  4800
SCSWSAS             U    000010       1  4778
SCSWSINT            U    000008       1  4779
SCSWSM              U    000040       1  4788
SCSWSPEN            U    000001       1  4782
SCSWSPRI            U    000004       1  4780  4365
SCSWSSEC            U    000002       1  4781
SCSWSSIC            U    000008       1  4760
SCSWSUSC            U    000008       1  4748
SCSWUC              U    000002       1  4793  3879  3887  3912  3917  3921  3950  3958  3987  3995  4028  4032  4040  4044  4074
                                               4082  4124  4128  4136  4140  4148  4152  4160  4164  4172  4177  4182  4214  4222
                                               4230  4260  4271  4299
SCSWUS              X    000008       1  4786  3879  3887  3912  3917  3921  3950  3958  3987  3995  4028  4032  4040  4044  4074
                                               4077  4082  4085  4124  4128  4136  4140  4148  4152  4160  4164  4172  4177  4182
                                               4214  4222  4230  4260  4271  4299  4364
SCSWUX              U    000001       1  4794  4077  4085
SENSE               X    000738       2  4457  3924  3926  4035  4047  4131  4143  4155  4167  4456  4530  4534
SENSECMD            U    000004       1  4419  4456  4530  4534
SENSEPGM            W    000730       8  4456  4327
SIZ03A              C    000780       4  4466  3964  4464  4465
SIZ03B              C    000794       4  4469  3964  4467  4468
SIZ04A              C    0007A8       4  4473  4001  4471  4472
SIZ04B              C    0007C4       4  4477  4001  4475  4476
SIZ09A              C    000A04       4  4516  4280  4514  4515
SIZ09B              C    000A28       4  4522  4280  4520  4521
SKIP                U    000010       1  4415  4530  4534
SKP11NOW            U    0000DB       1  4443  4559  4561
SKP12NOW            U    0000E3       1  4444  4540  4546
SKP1NOW             U    00008B       1  4440  4543  4550
SKP2NOW             U    000093       1  4441  4537
SKP8NOW             U    0000C3       1  4442  4553  4555
SLI                 U    000020       1  4414  4456  4528  4529  4530  4531  4532  4533  4534  4536  4537  4539  4540  4541  4542
                                               4543  4545  4546  4547  4548  4549  4550  4552  4553  4555  4556  4558  4559  4560
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    42

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

                                               4561  4562  4564  4565  4566  4567  4568  4572  4573  4574  4575  4576  4577  4578
                                               4579  4580  4582  4584  4585  4586  4588  4589  4590
SNS0CH9             U    000001       1  4449  4035  4047
SNS0DTCK            U    000008       1  4447  3924
SNS0EQCK            U    000010       1  4446  3924
SNS0LDCK            U    000002       1  4448  4131  4143  4155  4167
SNS1LPCK            U    000010       1  4450  3926
SP0AFTER            U    000001       1  4431  4549
SP1AFTER            U    000009       1  4432  4583
SP1NOW              U    00000B       1  4436  4531  4542  4548
SP2AFTER            U    000011       1  4433  4562
SP2NOW              U    000013       1  4437  4556
SP3AFTER            U    000019       1  4434  4554
SP3NOW              U    00001B       1  4438  4541  4547  4560
SSARCHMD            X    0000A3       1  4895
SSARS               F    000120       4  4951
SSCLKCMP            F    0000E0       8  4945
SSCPUTIM            F    0000D8       8  4944
SSCRS               F    0001C0       4  4954
SSFPRS              D    000160       8  4952
SSGRS               F    000180       4  4953
SSMODEL             F    00010C       4  4949
SSPREFIX            F    000108       4  4948
SSPSW               F    000100       8  4947
SSXSAA              A    0000D4       4  4943
STFLDATA            F    0000C8       4  4916
SVCICODE            H    00008A       2  4875
SVCIID              F    000088       4  4871
SVCIILC             X    000089       1  4873
SVCIILCM            U    00000C       1  4874
SVCNPSW             F    000060       8  4858
SVCOPSW             F    000020       8  4830  4837
TEST01              I    0002E6       4  3874  3764
TEST02              I    00031E       4  3907  3765
TEST03              I    000360       4  3945  3766
TEST04              I    0003A4       4  3982  3767
TEST05              I    0003E8       4  4023  3768
TEST06              I    000434       4  4069  3769
TEST07              I    00046C       4  4119  3770
TEST08              I    000528       4  4209  3771
TEST09              I    00057C       4  4255  3772
TEST3211            J    000000    4112  3708  3711  3718  3726  3728  4596  4622
TESTFCB             X    00073A      12  4458  4536  4539  4545  4552  4558  4582
TIMER               F    000050       4  4854
TTDES               F    000054       4  4855
UA0                 F    000010       8  4827
UA1                 F    00004C       4  4852
UA2                 F    0000A4       4  4897
UA3                 F    0000B4       4  4906
UA4                 X    0000B8       1  4907
UA5                 X    0000CC       8  4917
UA6                 X    0000EC       8  4923
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    43

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

UA7                 F    000118       8  4934
UA8                 X    000180      32  4963
UCBL3211            U    0001B0       1  4429
UCFAIL              I    0005D8       4  4298  3880  3888  3913  3922  3951  3959  3988  3996  4033  4045  4075  4083  4129  4141
                                               4153  4165  4173  4178  4183  4215  4223  4231  4261  4272
UCS07F              C    00080C       6  4490  4567
WPSW0015            3    000658       8  4348  4347
WRITEPLB            U    000005       1  4420  4587
ZBRKADDR            A    000110       8  4933
ZEMONCNT            F    00010C       4  4932
ZEMONCTR            A    000100       8  4930
ZEMONSIZ            F    000108       4  4931
ZEXTNPSW            X    0001B0      16  4966
ZEXTOPSW            X    000130      16  4958
ZIONPSW             X    0001F0      16  4970
ZIOOPSW             X    000170      16  4962
ZMCKNPSW            X    0001E0      16  4969
ZMCKOPSW            X    000160      16  4961
ZMKFAILA            F    0000F8       8  4925
ZMONCODE            F    0000B0       8  4900
ZPGMNPSW            X    0001D0      16  4968
ZPGMOPSW            X    000150      16  4960
ZPGMTRX             F    0000A8       8  4899
ZRSTNPSW            X    0001A0      16  4965
ZRSTOPSW            X    000120      16  4957
ZSASDISP            U    0011C0       1  4971
ZSVCNPSW            X    0001C0      16  4967
ZSVCOPSW            X    000140      16  4959
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    44

 MACRO     DEFN  REFERENCES

ANTR        142
APROB       274
ARCHIND     434   3645
ARCHLVL     575   3644
ASAIPL      701   3724
ASALOAD     781   3707
ASAREA      836   4817
ASAZAREA   1021
CPUWAIT    1104   4344
DSECTS     1430   4649   4681   4728   4743   4814
DWAIT      1633   3803   3808   3814
DWAITEND   1690   3813
ENADEV     1698   3834
ESA390     1798
IOCB       1809   4381
IOCBDS     1985   4650
IOFMT      2019   4682   4729   4744   4976   4994   5002
IOINIT     2357   3823
IOTRFR     2398
ORB        2446   4400
POINTER    2635
PSWFMT     2663
RAWAIT     2797
RAWIO      2893   3458*  4331
SETARCH    3618   3784
SIGCPU     3051
SMMGR      3109
SMMGRB     3209
TRAP128    3258
TRAP64     3235   3709   3712
TRAPS      3271
ZARCH      3345
ZEROH      3357
ZEROL      3385
ZEROLH     3413
ZEROLL     3436
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    45

   DESC     SYMBOL   SIZE     POS        ADDR

Entry: 0

Image      IMAGE     4112  0000-100F  0000-100F
  Region   CODE      4112  0000-100F  0000-100F
    CSECT  TEST3211  4112  0000-100F  0000-100F
ASMA Ver. 0.2.0  Simple 3211 Printer Tests                                                          08 May 2017 12:51:58  Page    46

   STMT                                             FILE NAME

1     c:\Users\Fish\Documents\Visual Studio 2008\Projects\MyProjects\ASMA-0\3211\3211.asm
2     C:\Users\Fish\Documents\Visual Studio 2008\Projects\Hercules\_Git\_Harold\SATK-0\srcasm\satk.mac


** NO ERRORS FOUND **

